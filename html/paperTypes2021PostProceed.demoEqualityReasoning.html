<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>paperTypes2021PostProceed.demoEqualityReasoning</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="basicBitcoinDataType.html" class="Module">basicBitcoinDataType</a>

<a id="35" class="Keyword">module</a> <a id="42" href="paperTypes2021PostProceed.demoEqualityReasoning.html" class="Module">paperTypes2021PostProceed.demoEqualityReasoning</a> <a id="90" class="Symbol">(</a><a id="91" href="paperTypes2021PostProceed.demoEqualityReasoning.html#91" class="Bound">param</a> <a id="97" class="Symbol">:</a> <a id="99" href="basicBitcoinDataType.html#1157" class="Record">GlobalParameters</a><a id="115" class="Symbol">)</a> <a id="117" class="Keyword">where</a>

<a id="124" class="Keyword">open</a> <a id="129" class="Keyword">import</a> <a id="136" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="151" class="Keyword">hiding</a> <a id="158" class="Symbol">(</a><a id="159" href="Data.List.Base.html#1954" class="Function Operator">_++_</a> <a id="164" class="Symbol">)</a>
<a id="166" class="Keyword">open</a> <a id="171" class="Keyword">import</a> <a id="178" href="Data.Nat.html" class="Module">Data.Nat</a>  <a id="188" class="Keyword">renaming</a> <a id="197" class="Symbol">(</a><a id="198" href="Data.Nat.Base.html#1691" class="Datatype Operator">_≤_</a> <a id="202" class="Symbol">to</a> <a id="205" class="Datatype Operator">_≤&#39;_</a> <a id="210" class="Symbol">;</a> <a id="212" href="Data.Nat.Base.html#1801" class="Function Operator">_&lt;_</a> <a id="216" class="Symbol">to</a> <a id="219" class="Function Operator">_&lt;&#39;_</a><a id="223" class="Symbol">)</a>
<a id="225" class="Keyword">open</a> <a id="230" class="Keyword">import</a> <a id="237" href="Data.List.html" class="Module">Data.List</a> <a id="247" class="Keyword">hiding</a> <a id="254" class="Symbol">(</a><a id="255" href="Data.List.Base.html#1954" class="Function Operator">_++_</a>  <a id="261" class="Symbol">)</a>
<a id="263" class="Keyword">open</a> <a id="268" class="Keyword">import</a> <a id="275" href="Data.Sum.html" class="Module">Data.Sum</a>
<a id="284" class="Keyword">open</a> <a id="289" class="Keyword">import</a> <a id="296" href="Data.Unit.html" class="Module">Data.Unit</a>  
<a id="308" class="Keyword">open</a> <a id="313" class="Keyword">import</a> <a id="320" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="331" class="Keyword">open</a> <a id="336" class="Keyword">import</a> <a id="343" href="Data.Maybe.html" class="Module">Data.Maybe</a>
<a id="354" class="Keyword">open</a> <a id="359" class="Keyword">import</a> <a id="366" href="Data.Bool.html" class="Module">Data.Bool</a>  <a id="377" class="Keyword">hiding</a> <a id="384" class="Symbol">(</a><a id="385" href="Data.Bool.Base.html#681" class="Datatype Operator">_≤_</a> <a id="389" class="Symbol">;</a> <a id="391" href="Data.Bool.Base.html#760" class="Datatype Operator">_&lt;_</a> <a id="395" class="Symbol">;</a> <a id="397" href="Data.Bool.Base.html#1505" class="Function Operator">if_then_else_</a>  <a id="412" class="Symbol">)</a>  <a id="415" class="Keyword">renaming</a> <a id="424" class="Symbol">(</a><a id="425" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> <a id="429" class="Symbol">to</a> <a id="432" class="Function Operator">_∧b_</a> <a id="437" class="Symbol">;</a> <a id="439" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a> <a id="443" class="Symbol">to</a> <a id="446" class="Function Operator">_∨b_</a> <a id="451" class="Symbol">;</a> <a id="453" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="455" class="Symbol">to</a> <a id="458" class="Function">True</a><a id="462" class="Symbol">)</a>
<a id="464" class="Keyword">open</a> <a id="469" class="Keyword">import</a> <a id="476" href="Data.Product.html" class="Module">Data.Product</a> <a id="489" class="Keyword">renaming</a> <a id="498" class="Symbol">(</a><a id="499" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a> <a id="503" class="Symbol">to</a> <a id="506" class="InductiveConstructor Operator">_,,_</a> <a id="511" class="Symbol">)</a>
<a id="513" class="Keyword">open</a> <a id="518" class="Keyword">import</a> <a id="525" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="539" class="Keyword">hiding</a> <a id="546" class="Symbol">(</a><a id="547" href="Data.Nat.Base.html#1691" class="Datatype Operator">_≤_</a> <a id="551" class="Symbol">;</a> <a id="553" href="Data.Nat.Base.html#1801" class="Function Operator">_&lt;_</a><a id="556" class="Symbol">)</a>
<a id="558" class="Keyword">open</a> <a id="563" class="Keyword">import</a> <a id="570" href="Data.List.NonEmpty.html" class="Module">Data.List.NonEmpty</a> <a id="589" class="Keyword">hiding</a> <a id="596" class="Symbol">(</a><a id="597" href="Data.List.NonEmpty.Base.html#1291" class="Field">head</a><a id="601" class="Symbol">;</a> <a id="603" href="Data.List.NonEmpty.Base.html#1491" class="Function Operator">[_]</a><a id="606" class="Symbol">)</a>
<a id="608" class="Keyword">open</a> <a id="613" class="Keyword">import</a> <a id="620" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="629" class="Keyword">using</a> <a id="635" class="Symbol">(</a><a id="636" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="637" class="Symbol">;</a> <a id="639" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">_+_</a><a id="642" class="Symbol">;</a> <a id="644" href="Data.Nat.Base.html#2259" class="Function Operator">_≥_</a><a id="647" class="Symbol">;</a> <a id="649" href="Data.Nat.Base.html#2289" class="Function Operator">_&gt;_</a><a id="652" class="Symbol">;</a> <a id="654" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="658" class="Symbol">;</a> <a id="660" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a><a id="663" class="Symbol">;</a> <a id="665" href="Data.Nat.Base.html#1756" class="InductiveConstructor">s≤s</a><a id="668" class="Symbol">;</a> <a id="670" href="Data.Nat.Base.html#1714" class="InductiveConstructor">z≤n</a><a id="673" class="Symbol">)</a>
<a id="675" class="Keyword">import</a> <a id="682" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="720" class="Symbol">as</a> <a id="723" class="Module">Eq</a>
<a id="726" class="Keyword">open</a> <a id="731" href="Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="734" class="Keyword">using</a> <a id="740" class="Symbol">(</a><a id="741" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="744" class="Symbol">;</a> <a id="746" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="750" class="Symbol">;</a> <a id="752" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a><a id="756" class="Symbol">;</a> <a id="758" class="Keyword">module</a> <a id="765" href="Relation.Binary.PropositionalEquality.Properties.html#6744" class="Module">≡-Reasoning</a><a id="776" class="Symbol">;</a> <a id="778" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a><a id="781" class="Symbol">)</a>
<a id="783" class="Keyword">open</a> <a id="788" href="Relation.Binary.PropositionalEquality.Properties.html#6744" class="Module">≡-Reasoning</a>
<a id="800" class="Keyword">open</a> <a id="805" class="Keyword">import</a> <a id="812" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a>


<a id="836" class="Comment">--our libraries</a>
<a id="852" class="Keyword">open</a> <a id="857" class="Keyword">import</a> <a id="864" href="libraries.listLib.html" class="Module">libraries.listLib</a>
<a id="882" class="Keyword">open</a> <a id="887" class="Keyword">import</a> <a id="894" href="libraries.emptyLib.html" class="Module">libraries.emptyLib</a>
<a id="913" class="Keyword">open</a> <a id="918" class="Keyword">import</a> <a id="925" href="libraries.natLib.html" class="Module">libraries.natLib</a>
<a id="942" class="Keyword">open</a> <a id="947" class="Keyword">import</a> <a id="954" href="libraries.boolLib.html" class="Module">libraries.boolLib</a>
<a id="972" class="Keyword">open</a> <a id="977" class="Keyword">import</a> <a id="984" href="libraries.equalityLib.html" class="Module">libraries.equalityLib</a>
<a id="1006" class="Keyword">open</a> <a id="1011" class="Keyword">import</a> <a id="1018" href="libraries.andLib.html" class="Module">libraries.andLib</a>
<a id="1035" class="Keyword">open</a> <a id="1040" class="Keyword">import</a> <a id="1047" href="libraries.maybeLib.html" class="Module">libraries.maybeLib</a>


<a id="1068" class="Keyword">open</a> <a id="1073" class="Keyword">import</a> <a id="1080" href="stack.html" class="Module">stack</a>
<a id="1086" class="Keyword">open</a> <a id="1091" class="Keyword">import</a> <a id="1098" href="stackPredicate.html" class="Module">stackPredicate</a>
<a id="1113" class="Keyword">open</a> <a id="1118" class="Keyword">import</a> <a id="1125" href="semanticBasicOperations.html" class="Module">semanticBasicOperations</a> <a id="1149" href="paperTypes2021PostProceed.demoEqualityReasoning.html#91" class="Bound">param</a>
<a id="1155" class="Keyword">open</a> <a id="1160" class="Keyword">import</a> <a id="1167" href="instructionBasic.html" class="Module">instructionBasic</a>
<a id="1184" class="Keyword">open</a> <a id="1189" class="Keyword">import</a> <a id="1196" href="verificationMultiSig.html" class="Module">verificationMultiSig</a> <a id="1217" href="paperTypes2021PostProceed.demoEqualityReasoning.html#91" class="Bound">param</a>
<a id="1223" class="Keyword">open</a> <a id="1228" class="Keyword">import</a> <a id="1235" href="verificationStackScripts.semanticsStackInstructions.html" class="Module">verificationStackScripts.semanticsStackInstructions</a> <a id="1287" href="paperTypes2021PostProceed.demoEqualityReasoning.html#91" class="Bound">param</a>
<a id="1293" class="Keyword">open</a> <a id="1298" class="Keyword">import</a> <a id="1305" href="verificationStackScripts.stackVerificationLemmas.html" class="Module">verificationStackScripts.stackVerificationLemmas</a> <a id="1354" href="paperTypes2021PostProceed.demoEqualityReasoning.html#91" class="Bound">param</a>
<a id="1360" class="Keyword">open</a> <a id="1365" class="Keyword">import</a> <a id="1372" href="verificationStackScripts.stackHoareTriple.html" class="Module">verificationStackScripts.stackHoareTriple</a> <a id="1414" href="paperTypes2021PostProceed.demoEqualityReasoning.html#91" class="Bound">param</a>
<a id="1420" class="Keyword">open</a> <a id="1425" class="Keyword">import</a> <a id="1432" href="verificationStackScripts.sPredicate.html" class="Module">verificationStackScripts.sPredicate</a>
<a id="1468" class="Keyword">open</a> <a id="1473" class="Keyword">import</a> <a id="1480" href="verificationStackScripts.hoareTripleStackBasic.html" class="Module">verificationStackScripts.hoareTripleStackBasic</a> <a id="1527" href="paperTypes2021PostProceed.demoEqualityReasoning.html#91" class="Bound">param</a>
<a id="1533" class="Keyword">open</a> <a id="1538" class="Keyword">import</a> <a id="1545" href="verificationStackScripts.stackState.html" class="Module">verificationStackScripts.stackState</a>
<a id="1581" class="Keyword">open</a> <a id="1586" class="Keyword">import</a> <a id="1593" href="verificationStackScripts.stackSemanticsInstructionsBasic.html" class="Module">verificationStackScripts.stackSemanticsInstructionsBasic</a> <a id="1650" href="paperTypes2021PostProceed.demoEqualityReasoning.html#91" class="Bound">param</a>
<a id="1656" class="Keyword">open</a> <a id="1661" class="Keyword">import</a> <a id="1668" href="verificationStackScripts.verificationMultiSigBasic.html" class="Module">verificationStackScripts.verificationMultiSigBasic</a> <a id="1719" href="paperTypes2021PostProceed.demoEqualityReasoning.html#91" class="Bound">param</a>



<a id="1728" class="Keyword">postulate</a>
  <a id="precondition"></a><a id="1740" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1740" class="Postulate">precondition</a> <a id="1753" class="Symbol">:</a> <a id="1755" href="verificationStackScripts.sPredicate.html#1174" class="Function">StackStatePred</a>

  <a id="postcondition"></a><a id="1773" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1773" class="Postulate">postcondition</a> <a id="1787" class="Symbol">:</a> <a id="1789" href="verificationStackScripts.sPredicate.html#1174" class="Function">StackStatePred</a>

  <a id="intermediateCond1"></a><a id="1807" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1807" class="Postulate">intermediateCond1</a> <a id="1825" class="Symbol">:</a> <a id="1827" href="verificationStackScripts.sPredicate.html#1174" class="Function">StackStatePred</a>

  <a id="intermediateCond2"></a><a id="1845" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1845" class="Postulate">intermediateCond2</a> <a id="1863" class="Symbol">:</a> <a id="1865" href="verificationStackScripts.sPredicate.html#1174" class="Function">StackStatePred</a>

  <a id="intermediateCond3"></a><a id="1883" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1883" class="Postulate">intermediateCond3</a> <a id="1901" class="Symbol">:</a> <a id="1903" href="verificationStackScripts.sPredicate.html#1174" class="Function">StackStatePred</a>

  <a id="prog1"></a><a id="1921" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1921" class="Postulate">prog1</a> <a id="1927" class="Symbol">:</a> <a id="1929" href="instructionBasic.html#1030" class="Function">BitcoinScriptBasic</a>

  <a id="prog2"></a><a id="1951" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1951" class="Postulate">prog2</a> <a id="prog3"></a><a id="1957" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1957" class="Postulate">prog3</a> <a id="1963" class="Symbol">:</a> <a id="1965" href="instructionBasic.html#1030" class="Function">BitcoinScriptBasic</a>


  <a id="proof1"></a><a id="1988" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1988" class="Postulate">proof1</a> <a id="1995" class="Symbol">:</a> <a id="1997" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&lt;</a> <a id="1999" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1740" class="Postulate">precondition</a> <a id="2012" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&gt;ⁱᶠᶠ</a> <a id="2017" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1921" class="Postulate">prog1</a>  <a id="2024" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&lt;</a> <a id="2026" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1807" class="Postulate">intermediateCond1</a> <a id="2044" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&gt;</a>
  <a id="proof2"></a><a id="2048" href="paperTypes2021PostProceed.demoEqualityReasoning.html#2048" class="Postulate">proof2</a> <a id="2055" class="Symbol">:</a> <a id="2057" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&lt;</a> <a id="2059" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1807" class="Postulate">intermediateCond1</a> <a id="2077" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&gt;ⁱᶠᶠ</a> <a id="2082" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1951" class="Postulate">prog2</a> <a id="2088" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&lt;</a> <a id="2090" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1845" class="Postulate">intermediateCond2</a> <a id="2108" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&gt;</a>
  <a id="proof3"></a><a id="2112" href="paperTypes2021PostProceed.demoEqualityReasoning.html#2112" class="Postulate">proof3</a> <a id="2119" class="Symbol">:</a> <a id="2121" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1845" class="Postulate">intermediateCond2</a> <a id="2139" href="verificationStackScripts.stackHoareTriple.html#1833" class="Record Operator">&lt;=&gt;p</a> <a id="2144" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1883" class="Postulate">intermediateCond3</a>
  <a id="proof4"></a><a id="2164" href="paperTypes2021PostProceed.demoEqualityReasoning.html#2164" class="Postulate">proof4</a> <a id="2171" class="Symbol">:</a> <a id="2173" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&lt;</a> <a id="2175" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1883" class="Postulate">intermediateCond3</a> <a id="2193" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&gt;ⁱᶠᶠ</a> <a id="2198" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1957" class="Postulate">prog3</a> <a id="2204" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&lt;</a> <a id="2206" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1773" class="Postulate">postcondition</a> <a id="2220" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&gt;</a>


<a id="theorem"></a><a id="2224" href="paperTypes2021PostProceed.demoEqualityReasoning.html#2224" class="Function">theorem</a> <a id="2232" class="Symbol">:</a> <a id="2234" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&lt;</a> <a id="2236" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1740" class="Postulate">precondition</a> <a id="2249" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&gt;ⁱᶠᶠ</a> <a id="2254" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1921" class="Postulate">prog1</a> <a id="2260" href="libraries.listLib.html#559" class="Function Operator">++</a> <a id="2263" class="Symbol">(</a><a id="2264" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1951" class="Postulate">prog2</a> <a id="2270" href="libraries.listLib.html#559" class="Function Operator">++</a> <a id="2273" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1957" class="Postulate">prog3</a><a id="2278" class="Symbol">)</a>  <a id="2281" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&lt;</a>  <a id="2284" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1773" class="Postulate">postcondition</a> <a id="2298" href="verificationStackScripts.stackHoareTriple.html#1577" class="Record Operator">&gt;</a>
<a id="2300" href="paperTypes2021PostProceed.demoEqualityReasoning.html#2224" class="Function">theorem</a> <a id="2308" class="Symbol">=</a>  <a id="2311" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1740" class="Postulate">precondition</a>       <a id="2330" href="verificationStackScripts.stackHoareTriple.html#6883" class="Function">&lt;&gt;&lt;&gt;⟨</a>  <a id="2337" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1921" class="Postulate">prog1</a>   <a id="2345" href="verificationStackScripts.stackHoareTriple.html#6883" class="Function">⟩⟨</a>  <a id="2349" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1988" class="Postulate">proof1</a>  <a id="2357" href="verificationStackScripts.stackHoareTriple.html#6883" class="Function">⟩</a>
           <a id="2370" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1807" class="Postulate">intermediateCond1</a>  <a id="2389" href="verificationStackScripts.stackHoareTriple.html#6883" class="Function">&lt;&gt;&lt;&gt;⟨</a>  <a id="2396" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1951" class="Postulate">prog2</a>   <a id="2404" href="verificationStackScripts.stackHoareTriple.html#6883" class="Function">⟩⟨</a>  <a id="2408" href="paperTypes2021PostProceed.demoEqualityReasoning.html#2048" class="Postulate">proof2</a>  <a id="2416" href="verificationStackScripts.stackHoareTriple.html#6883" class="Function">⟩</a>
           <a id="2429" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1845" class="Postulate">intermediateCond2</a>  <a id="2448" href="verificationStackScripts.stackHoareTriple.html#7334" class="Function">&lt;=&gt;⟨</a>   <a id="2455" href="paperTypes2021PostProceed.demoEqualityReasoning.html#2112" class="Postulate">proof3</a>  <a id="2463" href="verificationStackScripts.stackHoareTriple.html#7334" class="Function">⟩</a>
           <a id="2476" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1883" class="Postulate">intermediateCond3</a>  <a id="2495" href="verificationStackScripts.stackHoareTriple.html#7124" class="Function">&lt;&gt;&lt;&gt;⟨</a>  <a id="2502" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1957" class="Postulate">prog3</a>   <a id="2510" href="verificationStackScripts.stackHoareTriple.html#7124" class="Function">⟩⟨</a>  <a id="2514" href="paperTypes2021PostProceed.demoEqualityReasoning.html#2164" class="Postulate">proof4</a>  <a id="2522" href="verificationStackScripts.stackHoareTriple.html#7124" class="Function">⟩e</a>   <a id="2527" href="paperTypes2021PostProceed.demoEqualityReasoning.html#1773" class="Postulate">postcondition</a>  <a id="2542" href="verificationStackScripts.stackHoareTriple.html#6784" class="Function Operator">∎p</a>

</pre></body></html>