<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>instruction</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="instruction.html" class="Module">instruction</a> <a id="20" class="Keyword">where</a>

<a id="27" class="Keyword">open</a> <a id="32" class="Keyword">import</a> <a id="39" href="Data.Nat.html" class="Module">Data.Nat</a>  <a id="49" class="Keyword">hiding</a> <a id="56" class="Symbol">(</a><a id="57" href="Data.Nat.Base.html#1535" class="Datatype Operator">_≤_</a><a id="60" class="Symbol">)</a>
<a id="62" class="Keyword">open</a> <a id="67" class="Keyword">import</a> <a id="74" href="Data.List.html" class="Module">Data.List</a> <a id="84" class="Keyword">hiding</a> <a id="91" class="Symbol">(</a><a id="92" href="Data.List.Base.html#1810" class="Function Operator">_++_</a><a id="96" class="Symbol">)</a>
<a id="98" class="Keyword">open</a> <a id="103" class="Keyword">import</a> <a id="110" href="Data.Unit.html" class="Module">Data.Unit</a>  <a id="121" class="Keyword">hiding</a> <a id="128" class="Symbol">(</a><a id="129" href="Data.Unit.Base.html#1023" class="Record Operator">_≤_</a><a id="132" class="Symbol">)</a>
<a id="134" class="Keyword">open</a> <a id="139" class="Keyword">import</a> <a id="146" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="157" class="Keyword">open</a> <a id="162" class="Keyword">import</a> <a id="169" href="Data.Bool.html" class="Module">Data.Bool</a>  <a id="180" class="Keyword">hiding</a> <a id="187" class="Symbol">(</a><a id="188" href="Data.Bool.Base.html#672" class="Datatype Operator">_≤_</a> <a id="192" class="Symbol">;</a> <a id="194" href="Data.Bool.Base.html#1283" class="Function Operator">if_then_else_</a> <a id="208" class="Symbol">)</a> <a id="210" class="Keyword">renaming</a> <a id="219" class="Symbol">(</a><a id="220" href="Data.Bool.Base.html#986" class="Function Operator">_∧_</a> <a id="224" class="Symbol">to</a> <a id="227" class="Function Operator">_∧b_</a> <a id="232" class="Symbol">;</a> <a id="234" href="Data.Bool.Base.html#1044" class="Function Operator">_∨_</a> <a id="238" class="Symbol">to</a> <a id="241" class="Function Operator">_∨b_</a> <a id="246" class="Symbol">;</a> <a id="248" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="250" class="Symbol">to</a> <a id="253" class="Function">True</a><a id="257" class="Symbol">)</a>
<a id="259" class="Keyword">open</a> <a id="264" class="Keyword">import</a> <a id="271" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="286" class="Keyword">hiding</a> <a id="293" class="Symbol">(</a><a id="294" href="Data.Bool.Base.html#672" class="Datatype Operator">_≤_</a> <a id="298" class="Symbol">;</a> <a id="300" href="Data.Bool.Base.html#1283" class="Function Operator">if_then_else_</a> <a id="314" class="Symbol">)</a> <a id="316" class="Keyword">renaming</a> <a id="325" class="Symbol">(</a><a id="326" href="Data.Bool.Base.html#986" class="Function Operator">_∧_</a> <a id="330" class="Symbol">to</a> <a id="333" class="Function Operator">_∧b_</a> <a id="338" class="Symbol">;</a> <a id="340" href="Data.Bool.Base.html#1044" class="Function Operator">_∨_</a> <a id="344" class="Symbol">to</a> <a id="347" class="Function Operator">_∨b_</a> <a id="352" class="Symbol">;</a> <a id="354" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="356" class="Symbol">to</a> <a id="359" class="Function">True</a><a id="363" class="Symbol">)</a>
<a id="365" class="Keyword">open</a> <a id="370" class="Keyword">import</a> <a id="377" href="Data.Product.html" class="Module">Data.Product</a> <a id="390" class="Keyword">renaming</a> <a id="399" class="Symbol">(</a><a id="400" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="404" class="Symbol">to</a> <a id="407" class="InductiveConstructor Operator">_,,_</a> <a id="412" class="Symbol">)</a>
<a id="414" class="Keyword">open</a> <a id="419" class="Keyword">import</a> <a id="426" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="440" class="Keyword">hiding</a> <a id="447" class="Symbol">(</a><a id="448" href="Data.Nat.Base.html#1535" class="Datatype Operator">_≤_</a><a id="451" class="Symbol">)</a>
<a id="453" class="Keyword">open</a> <a id="458" class="Keyword">import</a> <a id="465" href="Data.List.NonEmpty.html" class="Module">Data.List.NonEmpty</a> <a id="484" class="Keyword">hiding</a> <a id="491" class="Symbol">(</a><a id="492" href="Data.List.NonEmpty.Base.html#1141" class="Field">head</a><a id="496" class="Symbol">)</a>

<a id="499" class="Keyword">open</a> <a id="504" class="Keyword">import</a> <a id="511" href="libraries.listLib.html" class="Module">libraries.listLib</a>
<a id="529" class="Keyword">open</a> <a id="534" class="Keyword">import</a> <a id="541" href="libraries.natLib.html" class="Module">libraries.natLib</a>
<a id="558" class="Keyword">open</a> <a id="563" class="Keyword">import</a> <a id="570" href="libraries.boolLib.html" class="Module">libraries.boolLib</a>
<a id="588" class="Keyword">open</a> <a id="593" class="Keyword">import</a> <a id="600" href="libraries.andLib.html" class="Module">libraries.andLib</a>
<a id="617" class="Keyword">open</a> <a id="622" class="Keyword">import</a> <a id="629" href="libraries.miscLib.html" class="Module">libraries.miscLib</a>
<a id="647" class="Keyword">open</a> <a id="652" class="Keyword">import</a> <a id="659" href="libraries.maybeLib.html" class="Module">libraries.maybeLib</a>

<a id="679" class="Keyword">open</a> <a id="684" class="Keyword">import</a> <a id="691" href="stack.html" class="Module">stack</a>
<a id="697" class="Keyword">open</a> <a id="702" class="Keyword">import</a> <a id="709" href="instructionBasic.html" class="Module">instructionBasic</a>
<a id="726" class="Keyword">open</a> <a id="731" class="Keyword">import</a> <a id="738" href="basicBitcoinDataType.html" class="Module">basicBitcoinDataType</a>



<a id="762" class="Comment">-------------------------------------------------------------------------------------------------------------------------------------------</a>



<a id="905" class="Comment">{-

-- list with flow control instructions
data InstructionIf : Set where
  opIf opElse opEndIf : InstructionIf
  instruction : InstructionBasic → InstructionIf

-}</a>

<a id="1071" class="Comment">--list with all instructions</a>
<a id="1100" class="Keyword">data</a> <a id="InstructionAll"></a><a id="1105" href="instruction.html#1105" class="Datatype">InstructionAll</a> <a id="1120" class="Symbol">:</a> <a id="1122" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1126" class="Keyword">where</a>
   <a id="InstructionAll.opEqual"></a><a id="1135" href="instruction.html#1135" class="InductiveConstructor">opEqual</a>  <a id="1144" class="Symbol">:</a> <a id="1146" href="instruction.html#1105" class="Datatype">InstructionAll</a>
   <a id="InstructionAll.opAdd"></a><a id="1164" href="instruction.html#1164" class="InductiveConstructor">opAdd</a>    <a id="1173" class="Symbol">:</a> <a id="1175" href="instruction.html#1105" class="Datatype">InstructionAll</a>
   <a id="InstructionAll.opPush"></a><a id="1193" href="instruction.html#1193" class="InductiveConstructor">opPush</a>   <a id="1202" class="Symbol">:</a> <a id="1204" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1206" class="Symbol">→</a> <a id="1208" href="instruction.html#1105" class="Datatype">InstructionAll</a>
   <a id="InstructionAll.opSub"></a><a id="1226" href="instruction.html#1226" class="InductiveConstructor">opSub</a>    <a id="1235" class="Symbol">:</a> <a id="1237" href="instruction.html#1105" class="Datatype">InstructionAll</a>
   <a id="InstructionAll.opVerify"></a><a id="1255" href="instruction.html#1255" class="InductiveConstructor">opVerify</a> <a id="1264" class="Symbol">:</a> <a id="1266" href="instruction.html#1105" class="Datatype">InstructionAll</a>
   <a id="InstructionAll.opCheckSig"></a><a id="1284" href="instruction.html#1284" class="InductiveConstructor">opCheckSig</a> <a id="1295" class="Symbol">:</a> <a id="1297" href="instruction.html#1105" class="Datatype">InstructionAll</a>
   <a id="InstructionAll.opEqualVerify"></a><a id="1315" href="instruction.html#1315" class="InductiveConstructor">opEqualVerify</a> <a id="1329" class="Symbol">:</a> <a id="1331" href="instruction.html#1105" class="Datatype">InstructionAll</a>
   <a id="InstructionAll.opDup"></a><a id="1349" href="instruction.html#1349" class="InductiveConstructor">opDup</a> <a id="1355" class="Symbol">:</a> <a id="1357" href="instruction.html#1105" class="Datatype">InstructionAll</a>
   <a id="InstructionAll.opDrop"></a><a id="1375" href="instruction.html#1375" class="InductiveConstructor">opDrop</a> <a id="1382" class="Symbol">:</a>  <a id="1385" href="instruction.html#1105" class="Datatype">InstructionAll</a>
   <a id="InstructionAll.opSwap"></a><a id="1403" href="instruction.html#1403" class="InductiveConstructor">opSwap</a> <a id="1410" class="Symbol">:</a> <a id="1412" href="instruction.html#1105" class="Datatype">InstructionAll</a>
   <a id="InstructionAll.opHash"></a><a id="1430" href="instruction.html#1430" class="InductiveConstructor">opHash</a> <a id="1437" class="Symbol">:</a> <a id="1439" href="instruction.html#1105" class="Datatype">InstructionAll</a>
   <a id="InstructionAll.opCHECKLOCKTIMEVERIFY"></a><a id="1457" href="instruction.html#1457" class="InductiveConstructor">opCHECKLOCKTIMEVERIFY</a> <a id="1479" class="Symbol">:</a> <a id="1481" href="instruction.html#1105" class="Datatype">InstructionAll</a>
   <a id="InstructionAll.opCheckSig3"></a><a id="1499" href="instruction.html#1499" class="InductiveConstructor">opCheckSig3</a> <a id="1511" class="Symbol">:</a> <a id="1513" href="instruction.html#1105" class="Datatype">InstructionAll</a>
   <a id="InstructionAll.opMultiSig"></a><a id="1531" href="instruction.html#1531" class="InductiveConstructor">opMultiSig</a> <a id="1542" class="Symbol">:</a> <a id="1544" href="instruction.html#1105" class="Datatype">InstructionAll</a>
   <a id="InstructionAll.opIf"></a><a id="1562" href="instruction.html#1562" class="InductiveConstructor">opIf</a> <a id="InstructionAll.opElse"></a><a id="1567" href="instruction.html#1567" class="InductiveConstructor">opElse</a> <a id="InstructionAll.opEndIf"></a><a id="1574" href="instruction.html#1574" class="InductiveConstructor">opEndIf</a> <a id="1582" class="Symbol">:</a> <a id="1584" href="instruction.html#1105" class="Datatype">InstructionAll</a>


<a id="basicInstr2Instr"></a><a id="1601" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="1618" class="Symbol">:</a> <a id="1620" href="instructionBasic.html#775" class="Datatype">InstructionBasic</a> <a id="1637" class="Symbol">→</a> <a id="1639" href="instruction.html#1105" class="Datatype">InstructionAll</a>
<a id="1654" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="1671" href="instructionBasic.html#806" class="InductiveConstructor">opEqual</a> <a id="1679" class="Symbol">=</a> <a id="1681" href="instruction.html#1135" class="InductiveConstructor">opEqual</a>
<a id="1689" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="1706" href="instructionBasic.html#814" class="InductiveConstructor">opAdd</a> <a id="1712" class="Symbol">=</a> <a id="1714" href="instruction.html#1164" class="InductiveConstructor">opAdd</a>
<a id="1720" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="1737" class="Symbol">(</a><a id="1738" href="instructionBasic.html#980" class="InductiveConstructor">opPush</a> <a id="1745" href="instruction.html#1745" class="Bound">x</a><a id="1746" class="Symbol">)</a> <a id="1748" class="Symbol">=</a> <a id="1750" class="Symbol">(</a><a id="1751" href="instruction.html#1193" class="InductiveConstructor">opPush</a> <a id="1758" href="instruction.html#1745" class="Bound">x</a><a id="1759" class="Symbol">)</a>
<a id="1761" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="1778" href="instructionBasic.html#820" class="InductiveConstructor">opSub</a> <a id="1784" class="Symbol">=</a> <a id="1786" href="instruction.html#1226" class="InductiveConstructor">opSub</a>
<a id="1792" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="1809" href="instructionBasic.html#826" class="InductiveConstructor">opVerify</a> <a id="1818" class="Symbol">=</a> <a id="1820" href="instruction.html#1255" class="InductiveConstructor">opVerify</a>
<a id="1829" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="1846" href="instructionBasic.html#945" class="InductiveConstructor">opCheckSig</a> <a id="1857" class="Symbol">=</a> <a id="1859" href="instruction.html#1284" class="InductiveConstructor">opCheckSig</a>
<a id="1870" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="1887" href="instructionBasic.html#835" class="InductiveConstructor">opEqualVerify</a> <a id="1901" class="Symbol">=</a> <a id="1903" href="instruction.html#1315" class="InductiveConstructor">opEqualVerify</a>
<a id="1917" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="1934" href="instructionBasic.html#863" class="InductiveConstructor">opDup</a> <a id="1940" class="Symbol">=</a> <a id="1942" href="instruction.html#1349" class="InductiveConstructor">opDup</a>
<a id="1948" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="1965" href="instructionBasic.html#849" class="InductiveConstructor">opDrop</a> <a id="1972" class="Symbol">=</a> <a id="1974" href="instruction.html#1375" class="InductiveConstructor">opDrop</a>
<a id="1981" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="1998" href="instructionBasic.html#856" class="InductiveConstructor">opSwap</a> <a id="2005" class="Symbol">=</a> <a id="2007" href="instruction.html#1403" class="InductiveConstructor">opSwap</a>
<a id="2014" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="2031" href="instructionBasic.html#893" class="InductiveConstructor">opHash</a> <a id="2038" class="Symbol">=</a> <a id="2040" href="instruction.html#1430" class="InductiveConstructor">opHash</a>
<a id="2047" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="2064" href="instructionBasic.html#911" class="InductiveConstructor">opCHECKLOCKTIMEVERIFY</a> <a id="2086" class="Symbol">=</a> <a id="2088" href="instruction.html#1457" class="InductiveConstructor">opCHECKLOCKTIMEVERIFY</a>
<a id="2110" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="2127" href="instructionBasic.html#933" class="InductiveConstructor">opCheckSig3</a> <a id="2139" class="Symbol">=</a> <a id="2141" href="instruction.html#1499" class="InductiveConstructor">opCheckSig3</a>
<a id="2153" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="2170" href="instructionBasic.html#900" class="InductiveConstructor">opMultiSig</a> <a id="2181" class="Symbol">=</a> <a id="2183" href="instruction.html#1531" class="InductiveConstructor">opMultiSig</a>



<a id="BitcoinScript"></a><a id="2197" href="instruction.html#2197" class="Function">BitcoinScript</a> <a id="2211" class="Symbol">:</a> <a id="2213" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="2217" href="instruction.html#2197" class="Function">BitcoinScript</a>  <a id="2232" class="Symbol">=</a> <a id="2234" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2239" href="instruction.html#1105" class="Datatype">InstructionAll</a>



<a id="basicBScript2BScript"></a><a id="2257" href="instruction.html#2257" class="Function">basicBScript2BScript</a> <a id="2278" class="Symbol">:</a> <a id="2280" href="instructionBasic.html#1072" class="Function">BitcoinScriptBasic</a> <a id="2299" class="Symbol">→</a> <a id="2301" href="instruction.html#2197" class="Function">BitcoinScript</a>
<a id="2315" href="instruction.html#2257" class="Function">basicBScript2BScript</a> <a id="2336" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="2339" class="Symbol">=</a> <a id="2341" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
<a id="2344" href="instruction.html#2257" class="Function">basicBScript2BScript</a> <a id="2365" class="Symbol">(</a><a id="2366" href="instruction.html#2366" class="Bound">x</a> <a id="2368" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2370" href="instruction.html#2370" class="Bound">s</a><a id="2371" class="Symbol">)</a> <a id="2373" class="Symbol">=</a> <a id="2375" href="instruction.html#1601" class="Function">basicInstr2Instr</a> <a id="2392" href="instruction.html#2366" class="Bound">x</a> <a id="2394" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2396" href="instruction.html#2257" class="Function">basicBScript2BScript</a> <a id="2417" href="instruction.html#2370" class="Bound">s</a>

<a id="2420" class="Comment">{-
-- function that maps all the instructions
mapInstruction : InstructionAll → InstructionIf
mapInstruction opEqual = instruction opEqual
mapInstruction opSwap = instruction opSwap
mapInstruction opAdd =  instruction opAdd
mapInstruction (opPush x) = instruction (opPush x)
mapInstruction opSub =  instruction opSub
mapInstruction opVerify =  instruction opVerify
mapInstruction opCheckSig =  instruction opCheckSig
mapInstruction opEqualVerify =  instruction opEqualVerify
mapInstruction opDup =  instruction  opDup
mapInstruction opDrop =  instruction  opDrop
mapInstruction opHash = instruction opHash
mapInstruction opIf = opIf
mapInstruction opElse =  opElse
mapInstruction opEndIf =  opEndIf
mapInstruction opCHECKLOCKTIMEVERIFY =  instruction  opCHECKLOCKTIMEVERIFY
mapInstruction  opCheckSig3 =  instruction opCheckSig3
mapInstruction  opMultiSig =  instruction  opMultiSig
-}</a>

<a id="3307" class="Comment">--------------------------------------------------------------------------------------------------------------------------</a>

<a id="3431" class="Comment">-------------------------------------------------------------------------------------------------------------------------------------------------------------------</a>
<a id="3595" class="Comment">-- true if the instruction is not  an if then else operation</a>
<a id="nonIfInstr"></a><a id="3656" href="instruction.html#3656" class="Function">nonIfInstr</a> <a id="3667" class="Symbol">:</a> <a id="3669" href="instruction.html#1105" class="Datatype">InstructionAll</a> <a id="3684" class="Symbol">→</a> <a id="3686" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a>
<a id="3691" href="instruction.html#3656" class="Function">nonIfInstr</a> <a id="3702" href="instruction.html#1562" class="InductiveConstructor">opIf</a> <a id="3707" class="Symbol">=</a> <a id="3709" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a>
<a id="3715" href="instruction.html#3656" class="Function">nonIfInstr</a> <a id="3726" href="instruction.html#1567" class="InductiveConstructor">opElse</a> <a id="3733" class="Symbol">=</a> <a id="3735" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a>
<a id="3741" href="instruction.html#3656" class="Function">nonIfInstr</a> <a id="3752" href="instruction.html#1574" class="InductiveConstructor">opEndIf</a> <a id="3760" class="Symbol">=</a> <a id="3762" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a>
<a id="3768" href="instruction.html#3656" class="CatchallClause Function">nonIfInstr</a><a id="3778" class="CatchallClause"> </a><a id="3779" href="instruction.html#3779" class="CatchallClause Bound">s</a> <a id="3781" class="Symbol">=</a> <a id="3783" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a>

<a id="NonIfInstr"></a><a id="3789" href="instruction.html#3789" class="Function">NonIfInstr</a> <a id="3800" class="Symbol">:</a> <a id="3802" href="instruction.html#1105" class="Datatype">InstructionAll</a> <a id="3817" class="Symbol">→</a> <a id="3819" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="3823" href="instruction.html#3789" class="Function">NonIfInstr</a> <a id="3834" href="instruction.html#3834" class="Bound">s</a> <a id="3836" class="Symbol">=</a> <a id="3838" href="instruction.html#253" class="Function">True</a> <a id="3843" class="Symbol">(</a><a id="3844" href="instruction.html#3656" class="Function">nonIfInstr</a> <a id="3855" href="instruction.html#3834" class="Bound">s</a><a id="3856" class="Symbol">)</a>


<a id="3860" class="Comment">-- check whether a script consists of nonif instructions only</a>
<a id="nonIfScript"></a><a id="3922" href="instruction.html#3922" class="Function">nonIfScript</a> <a id="3934" class="Symbol">:</a> <a id="3936" href="instruction.html#2197" class="Function">BitcoinScript</a> <a id="3950" class="Symbol">→</a> <a id="3952" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a>
<a id="3957" href="instruction.html#3922" class="Function">nonIfScript</a>  <a id="3970" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="3973" class="Symbol">=</a> <a id="3975" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a>
<a id="3980" href="instruction.html#3922" class="Function">nonIfScript</a> <a id="3992" class="Symbol">(</a><a id="3993" href="instruction.html#3993" class="Bound">op</a> <a id="3996" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3998" href="instruction.html#3998" class="Bound">rest</a><a id="4002" class="Symbol">)</a> <a id="4004" class="Symbol">=</a> <a id="4006" href="instruction.html#3656" class="Function">nonIfInstr</a> <a id="4017" href="instruction.html#3993" class="Bound">op</a> <a id="4020" href="instruction.html#227" class="Function Operator">∧b</a> <a id="4023" href="instruction.html#3922" class="Function">nonIfScript</a> <a id="4035" href="instruction.html#3998" class="Bound">rest</a>

<a id="NonIfScript"></a><a id="4041" href="instruction.html#4041" class="Function">NonIfScript</a> <a id="4053" class="Symbol">:</a> <a id="4055" href="instruction.html#2197" class="Function">BitcoinScript</a> <a id="4069" class="Symbol">→</a> <a id="4071" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="4075" href="instruction.html#4041" class="Function">NonIfScript</a> <a id="4087" href="instruction.html#4087" class="Bound">s</a> <a id="4089" class="Symbol">=</a> <a id="4091" href="instruction.html#253" class="Function">True</a> <a id="4096" class="Symbol">(</a><a id="4097" href="instruction.html#3922" class="Function">nonIfScript</a> <a id="4109" href="instruction.html#4087" class="Bound">s</a><a id="4110" class="Symbol">)</a>


<a id="nonIfScript2NonIf2Head"></a><a id="4114" href="instruction.html#4114" class="Function">nonIfScript2NonIf2Head</a> <a id="4137" class="Symbol">:</a> <a id="4139" class="Symbol">(</a><a id="4140" href="instruction.html#4140" class="Bound">op</a> <a id="4143" class="Symbol">:</a> <a id="4145" href="instruction.html#1105" class="Datatype">InstructionAll</a><a id="4159" class="Symbol">)(</a><a id="4161" href="instruction.html#4161" class="Bound">rest</a> <a id="4166" class="Symbol">:</a> <a id="4168" href="instruction.html#2197" class="Function">BitcoinScript</a><a id="4181" class="Symbol">)</a>
                        <a id="4207" class="Symbol">→</a> <a id="4209" href="instruction.html#4041" class="Function">NonIfScript</a> <a id="4221" class="Symbol">(</a><a id="4222" href="instruction.html#4140" class="Bound">op</a> <a id="4225" class="InductiveConstructor Operator">∷</a> <a id="4227" href="instruction.html#4161" class="Bound">rest</a><a id="4231" class="Symbol">)</a>
                        <a id="4257" class="Symbol">→</a> <a id="4259" href="instruction.html#3789" class="Function">NonIfInstr</a> <a id="4270" href="instruction.html#4140" class="Bound">op</a>
<a id="4273" href="instruction.html#4114" class="Function">nonIfScript2NonIf2Head</a> <a id="4296" href="instruction.html#4296" class="Bound">op</a> <a id="4299" href="instruction.html#4299" class="Bound">rest</a> <a id="4304" href="instruction.html#4304" class="Bound">p</a> <a id="4306" class="Symbol">=</a> <a id="4308" href="libraries.boolLib.html#331" class="Function">∧bproj₁</a> <a id="4316" href="instruction.html#4304" class="Bound">p</a>


<a id="nonIfScript2NonIf2Tail"></a><a id="4320" href="instruction.html#4320" class="Function">nonIfScript2NonIf2Tail</a> <a id="4343" class="Symbol">:</a> <a id="4345" class="Symbol">(</a><a id="4346" href="instruction.html#4346" class="Bound">op</a> <a id="4349" class="Symbol">:</a> <a id="4351" href="instruction.html#1105" class="Datatype">InstructionAll</a><a id="4365" class="Symbol">)(</a><a id="4367" href="instruction.html#4367" class="Bound">rest</a> <a id="4372" class="Symbol">:</a> <a id="4374" href="instruction.html#2197" class="Function">BitcoinScript</a><a id="4387" class="Symbol">)</a>
                        <a id="4413" class="Symbol">→</a> <a id="4415" href="instruction.html#4041" class="Function">NonIfScript</a> <a id="4427" class="Symbol">(</a><a id="4428" href="instruction.html#4346" class="Bound">op</a> <a id="4431" class="InductiveConstructor Operator">∷</a> <a id="4433" href="instruction.html#4367" class="Bound">rest</a><a id="4437" class="Symbol">)</a>
                        <a id="4463" class="Symbol">→</a> <a id="4465" href="instruction.html#4041" class="Function">NonIfScript</a> <a id="4477" href="instruction.html#4367" class="Bound">rest</a>
<a id="4482" href="instruction.html#4320" class="Function">nonIfScript2NonIf2Tail</a> <a id="4505" href="instruction.html#4505" class="Bound">op</a> <a id="4508" href="instruction.html#4508" class="Bound">rest</a> <a id="4513" href="instruction.html#4513" class="Bound">p</a> <a id="4515" class="Symbol">=</a> <a id="4517" href="libraries.boolLib.html#412" class="Function">∧bproj₂</a> <a id="4525" href="instruction.html#4513" class="Bound">p</a>


<a id="4529" class="Comment">{-
record InstructionBasic : Set where
  constructor  _,,_
  field
    instr : InstructionAll
    nonif : NonIfInstr instr


record BitcoinScriptBasic : Set where
  constructor  _,,_
  field
    script : BitcoinScript
    nonif : NonIfScript script
-}</a>
</pre></body></html>