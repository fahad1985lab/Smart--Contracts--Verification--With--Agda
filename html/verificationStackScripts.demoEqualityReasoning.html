<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>verificationStackScripts.demoEqualityReasoning</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="basicBitcoinDataType.html" class="Module">basicBitcoinDataType</a>
<a id="34" class="Keyword">module</a> <a id="41" href="verificationStackScripts.demoEqualityReasoning.html" class="Module">verificationStackScripts.demoEqualityReasoning</a> <a id="88" class="Symbol">(</a><a id="89" href="verificationStackScripts.demoEqualityReasoning.html#89" class="Bound">param</a> <a id="95" class="Symbol">:</a> <a id="97" href="basicBitcoinDataType.html#1548" class="Record">GlobalParameters</a><a id="113" class="Symbol">)</a> <a id="115" class="Keyword">where</a>

<a id="122" class="Keyword">open</a> <a id="127" class="Keyword">import</a> <a id="134" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="149" class="Keyword">hiding</a> <a id="156" class="Symbol">(</a><a id="157" href="Data.List.Base.html#1810" class="Function Operator">_++_</a> <a id="162" class="Symbol">)</a>
<a id="164" class="Keyword">open</a> <a id="169" class="Keyword">import</a> <a id="176" href="Data.Nat.html" class="Module">Data.Nat</a>  <a id="186" class="Keyword">renaming</a> <a id="195" class="Symbol">(</a><a id="196" href="Data.Nat.Base.html#1535" class="Datatype Operator">_≤_</a> <a id="200" class="Symbol">to</a> <a id="203" class="Datatype Operator">_≤&#39;_</a> <a id="208" class="Symbol">;</a> <a id="210" href="Data.Nat.Base.html#1645" class="Function Operator">_&lt;_</a> <a id="214" class="Symbol">to</a> <a id="217" class="Function Operator">_&lt;&#39;_</a><a id="221" class="Symbol">)</a>
<a id="223" class="Keyword">open</a> <a id="228" class="Keyword">import</a> <a id="235" href="Data.List.html" class="Module">Data.List</a> <a id="245" class="Keyword">hiding</a> <a id="252" class="Symbol">(</a><a id="253" href="Data.List.Base.html#1810" class="Function Operator">_++_</a>  <a id="259" class="Symbol">)</a>
<a id="261" class="Keyword">open</a> <a id="266" class="Keyword">import</a> <a id="273" href="Data.Sum.html" class="Module">Data.Sum</a>
<a id="282" class="Keyword">open</a> <a id="287" class="Keyword">import</a> <a id="294" href="Data.Unit.html" class="Module">Data.Unit</a>  <a id="305" class="Keyword">hiding</a> <a id="312" class="Symbol">(</a><a id="313" href="Data.Unit.Base.html#1023" class="Record Operator">_≤_</a><a id="316" class="Symbol">)</a>
<a id="318" class="Keyword">open</a> <a id="323" class="Keyword">import</a> <a id="330" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="341" class="Keyword">open</a> <a id="346" class="Keyword">import</a> <a id="353" href="Data.Maybe.html" class="Module">Data.Maybe</a>
<a id="364" class="Keyword">open</a> <a id="369" class="Keyword">import</a> <a id="376" href="Data.Bool.html" class="Module">Data.Bool</a>  <a id="387" class="Keyword">hiding</a> <a id="394" class="Symbol">(</a><a id="395" href="Data.Bool.Base.html#672" class="Datatype Operator">_≤_</a> <a id="399" class="Symbol">;</a> <a id="401" href="Data.Bool.Base.html#751" class="Datatype Operator">_&lt;_</a> <a id="405" class="Symbol">;</a> <a id="407" href="Data.Bool.Base.html#1283" class="Function Operator">if_then_else_</a>  <a id="422" class="Symbol">)</a>  <a id="425" class="Keyword">renaming</a> <a id="434" class="Symbol">(</a><a id="435" href="Data.Bool.Base.html#986" class="Function Operator">_∧_</a> <a id="439" class="Symbol">to</a> <a id="442" class="Function Operator">_∧b_</a> <a id="447" class="Symbol">;</a> <a id="449" href="Data.Bool.Base.html#1044" class="Function Operator">_∨_</a> <a id="453" class="Symbol">to</a> <a id="456" class="Function Operator">_∨b_</a> <a id="461" class="Symbol">;</a> <a id="463" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="465" class="Symbol">to</a> <a id="468" class="Function">True</a><a id="472" class="Symbol">)</a>
<a id="474" class="Keyword">open</a> <a id="479" class="Keyword">import</a> <a id="486" href="Data.Product.html" class="Module">Data.Product</a> <a id="499" class="Keyword">renaming</a> <a id="508" class="Symbol">(</a><a id="509" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="513" class="Symbol">to</a> <a id="516" class="InductiveConstructor Operator">_,,_</a> <a id="521" class="Symbol">)</a>
<a id="523" class="Keyword">open</a> <a id="528" class="Keyword">import</a> <a id="535" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="549" class="Keyword">hiding</a> <a id="556" class="Symbol">(</a><a id="557" href="Data.Nat.Base.html#1535" class="Datatype Operator">_≤_</a> <a id="561" class="Symbol">;</a> <a id="563" href="Data.Nat.Base.html#1645" class="Function Operator">_&lt;_</a><a id="566" class="Symbol">)</a>
<a id="568" class="Keyword">open</a> <a id="573" class="Keyword">import</a> <a id="580" href="Data.List.NonEmpty.html" class="Module">Data.List.NonEmpty</a> <a id="599" class="Keyword">hiding</a> <a id="606" class="Symbol">(</a><a id="607" href="Data.List.NonEmpty.Base.html#1141" class="Field">head</a><a id="611" class="Symbol">;</a> <a id="613" href="Data.List.NonEmpty.Base.html#1268" class="Function Operator">[_]</a><a id="616" class="Symbol">)</a>
<a id="618" class="Keyword">open</a> <a id="623" class="Keyword">import</a> <a id="630" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="639" class="Keyword">using</a> <a id="645" class="Symbol">(</a><a id="646" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="647" class="Symbol">;</a> <a id="649" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a><a id="652" class="Symbol">;</a> <a id="654" href="Data.Nat.Base.html#1679" class="Function Operator">_≥_</a><a id="657" class="Symbol">;</a> <a id="659" href="Data.Nat.Base.html#1709" class="Function Operator">_&gt;_</a><a id="662" class="Symbol">;</a> <a id="664" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="668" class="Symbol">;</a> <a id="670" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="673" class="Symbol">;</a> <a id="675" href="Data.Nat.Base.html#1600" class="InductiveConstructor">s≤s</a><a id="678" class="Symbol">;</a> <a id="680" href="Data.Nat.Base.html#1558" class="InductiveConstructor">z≤n</a><a id="683" class="Symbol">)</a>
<a id="685" class="Keyword">import</a> <a id="692" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="730" class="Symbol">as</a> <a id="733" class="Module">Eq</a>
<a id="736" class="Keyword">open</a> <a id="741" href="Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="744" class="Keyword">using</a> <a id="750" class="Symbol">(</a><a id="751" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="754" class="Symbol">;</a> <a id="756" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="760" class="Symbol">;</a> <a id="762" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a><a id="766" class="Symbol">;</a> <a id="768" class="Keyword">module</a> <a id="775" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a><a id="786" class="Symbol">;</a> <a id="788" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a><a id="791" class="Symbol">)</a>
<a id="793" class="Keyword">open</a> <a id="798" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a>
<a id="810" class="Keyword">open</a> <a id="815" class="Keyword">import</a> <a id="822" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a>


<a id="846" class="Comment">--our libraries</a>
<a id="862" class="Keyword">open</a> <a id="867" class="Keyword">import</a> <a id="874" href="libraries.listLib.html" class="Module">libraries.listLib</a>
<a id="892" class="Keyword">open</a> <a id="897" class="Keyword">import</a> <a id="904" href="libraries.emptyLib.html" class="Module">libraries.emptyLib</a>
<a id="923" class="Keyword">open</a> <a id="928" class="Keyword">import</a> <a id="935" href="libraries.natLib.html" class="Module">libraries.natLib</a>
<a id="952" class="Keyword">open</a> <a id="957" class="Keyword">import</a> <a id="964" href="libraries.boolLib.html" class="Module">libraries.boolLib</a>
<a id="982" class="Keyword">open</a> <a id="987" class="Keyword">import</a> <a id="994" href="libraries.equalityLib.html" class="Module">libraries.equalityLib</a>
<a id="1016" class="Keyword">open</a> <a id="1021" class="Keyword">import</a> <a id="1028" href="libraries.andLib.html" class="Module">libraries.andLib</a>
<a id="1045" class="Keyword">open</a> <a id="1050" class="Keyword">import</a> <a id="1057" href="libraries.miscLib.html" class="Module">libraries.miscLib</a>
<a id="1075" class="Keyword">open</a> <a id="1080" class="Keyword">import</a> <a id="1087" href="libraries.maybeLib.html" class="Module">libraries.maybeLib</a>
<a id="1106" class="Keyword">open</a> <a id="1111" class="Keyword">import</a> <a id="1118" href="stack.html" class="Module">stack</a>
<a id="1124" class="Keyword">open</a> <a id="1129" class="Keyword">import</a> <a id="1136" href="stackPredicate.html" class="Module">stackPredicate</a>
<a id="1151" class="Keyword">open</a> <a id="1156" class="Keyword">import</a> <a id="1163" href="semanticBasicOperations.html" class="Module">semanticBasicOperations</a> <a id="1187" href="verificationStackScripts.demoEqualityReasoning.html#89" class="Bound">param</a>
<a id="1193" class="Keyword">open</a> <a id="1198" class="Keyword">import</a> <a id="1205" href="instructionBasic.html" class="Module">instructionBasic</a>
<a id="1222" class="Keyword">open</a> <a id="1227" class="Keyword">import</a> <a id="1234" href="verificationMultiSig.html" class="Module">verificationMultiSig</a> <a id="1255" href="verificationStackScripts.demoEqualityReasoning.html#89" class="Bound">param</a>
<a id="1261" class="Keyword">open</a> <a id="1266" class="Keyword">import</a> <a id="1273" href="verificationStackScripts.semanticsStackInstructions.html" class="Module">verificationStackScripts.semanticsStackInstructions</a> <a id="1325" href="verificationStackScripts.demoEqualityReasoning.html#89" class="Bound">param</a>
<a id="1331" class="Keyword">open</a> <a id="1336" class="Keyword">import</a> <a id="1343" href="verificationStackScripts.stackVerificationLemmas.html" class="Module">verificationStackScripts.stackVerificationLemmas</a> <a id="1392" href="verificationStackScripts.demoEqualityReasoning.html#89" class="Bound">param</a>
<a id="1398" class="Keyword">open</a> <a id="1403" class="Keyword">import</a> <a id="1410" href="verificationStackScripts.stackHoareTriple.html" class="Module">verificationStackScripts.stackHoareTriple</a> <a id="1452" href="verificationStackScripts.demoEqualityReasoning.html#89" class="Bound">param</a>
<a id="1458" class="Keyword">open</a> <a id="1463" class="Keyword">import</a> <a id="1470" href="verificationStackScripts.sPredicate.html" class="Module">verificationStackScripts.sPredicate</a>
<a id="1506" class="Keyword">open</a> <a id="1511" class="Keyword">import</a> <a id="1518" href="verificationStackScripts.hoareTripleStackBasic.html" class="Module">verificationStackScripts.hoareTripleStackBasic</a> <a id="1565" href="verificationStackScripts.demoEqualityReasoning.html#89" class="Bound">param</a>
<a id="1571" class="Keyword">open</a> <a id="1576" class="Keyword">import</a> <a id="1583" href="verificationStackScripts.stackState.html" class="Module">verificationStackScripts.stackState</a>
<a id="1619" class="Keyword">open</a> <a id="1624" class="Keyword">import</a> <a id="1631" href="verificationStackScripts.stackSemanticsInstructionsBasic.html" class="Module">verificationStackScripts.stackSemanticsInstructionsBasic</a> <a id="1688" href="verificationStackScripts.demoEqualityReasoning.html#89" class="Bound">param</a>
<a id="1694" class="Keyword">open</a> <a id="1699" class="Keyword">import</a> <a id="1706" href="verificationStackScripts.verificationMultiSigBasic.html" class="Module">verificationStackScripts.verificationMultiSigBasic</a> <a id="1757" href="verificationStackScripts.demoEqualityReasoning.html#89" class="Bound">param</a>


<a id="1765" class="Comment">-- postulate time₁ : Time</a>
<a id="1791" class="Comment">-- postulate pbk1 pbk2 pbk3 pbk4 : ℕ</a>

<a id="1829" class="Keyword">postulate</a>

  <a id="precondition"></a><a id="1842" href="verificationStackScripts.demoEqualityReasoning.html#1842" class="Postulate">precondition</a> <a id="1855" class="Symbol">:</a> <a id="1857" href="verificationStackScripts.sPredicate.html#1290" class="Function">StackStatePred</a>


  <a id="postcondition"></a><a id="1876" href="verificationStackScripts.demoEqualityReasoning.html#1876" class="Postulate">postcondition</a> <a id="1890" class="Symbol">:</a> <a id="1892" href="verificationStackScripts.sPredicate.html#1290" class="Function">StackStatePred</a>


  <a id="intermediateCond1"></a><a id="1911" href="verificationStackScripts.demoEqualityReasoning.html#1911" class="Postulate">intermediateCond1</a> <a id="1929" class="Symbol">:</a> <a id="1931" href="verificationStackScripts.sPredicate.html#1290" class="Function">StackStatePred</a>


  <a id="intermediateCond2"></a><a id="1950" href="verificationStackScripts.demoEqualityReasoning.html#1950" class="Postulate">intermediateCond2</a> <a id="1968" class="Symbol">:</a> <a id="1970" href="verificationStackScripts.sPredicate.html#1290" class="Function">StackStatePred</a>


  <a id="intermediateCond3"></a><a id="1989" href="verificationStackScripts.demoEqualityReasoning.html#1989" class="Postulate">intermediateCond3</a> <a id="2007" class="Symbol">:</a> <a id="2009" href="verificationStackScripts.sPredicate.html#1290" class="Function">StackStatePred</a>

<a id="2025" class="Comment">-- programs</a>
  <a id="prog1"></a><a id="2039" href="verificationStackScripts.demoEqualityReasoning.html#2039" class="Postulate">prog1</a> <a id="2045" class="Symbol">:</a> <a id="2047" href="instructionBasic.html#1072" class="Function">BitcoinScriptBasic</a>

  <a id="prog2"></a><a id="2069" href="verificationStackScripts.demoEqualityReasoning.html#2069" class="Postulate">prog2</a> <a id="prog3"></a><a id="2075" href="verificationStackScripts.demoEqualityReasoning.html#2075" class="Postulate">prog3</a> <a id="2081" class="Symbol">:</a> <a id="2083" href="instructionBasic.html#1072" class="Function">BitcoinScriptBasic</a>


<a id="2104" class="Comment">--proofs</a>
  <a id="proof1"></a><a id="2115" href="verificationStackScripts.demoEqualityReasoning.html#2115" class="Postulate">proof1</a> <a id="2122" class="Symbol">:</a> <a id="2124" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&lt;</a> <a id="2126" href="verificationStackScripts.demoEqualityReasoning.html#1842" class="Postulate">precondition</a> <a id="2139" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&gt;iff</a> <a id="2144" href="verificationStackScripts.demoEqualityReasoning.html#2039" class="Postulate">prog1</a>  <a id="2151" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&lt;</a> <a id="2153" href="verificationStackScripts.demoEqualityReasoning.html#1911" class="Postulate">intermediateCond1</a> <a id="2171" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&gt;</a>
  <a id="proof2"></a><a id="2175" href="verificationStackScripts.demoEqualityReasoning.html#2175" class="Postulate">proof2</a> <a id="2182" class="Symbol">:</a> <a id="2184" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&lt;</a> <a id="2186" href="verificationStackScripts.demoEqualityReasoning.html#1911" class="Postulate">intermediateCond1</a> <a id="2204" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&gt;iff</a> <a id="2209" href="verificationStackScripts.demoEqualityReasoning.html#2069" class="Postulate">prog2</a> <a id="2215" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&lt;</a> <a id="2217" href="verificationStackScripts.demoEqualityReasoning.html#1950" class="Postulate">intermediateCond2</a> <a id="2235" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&gt;</a>
  <a id="proof3"></a><a id="2239" href="verificationStackScripts.demoEqualityReasoning.html#2239" class="Postulate">proof3</a> <a id="2246" class="Symbol">:</a> <a id="2248" href="verificationStackScripts.demoEqualityReasoning.html#1950" class="Postulate">intermediateCond2</a> <a id="2266" href="verificationStackScripts.stackHoareTriple.html#1875" class="Record Operator">&lt;=&gt;p</a> <a id="2271" href="verificationStackScripts.demoEqualityReasoning.html#1989" class="Postulate">intermediateCond3</a>
  <a id="proof4"></a><a id="2291" href="verificationStackScripts.demoEqualityReasoning.html#2291" class="Postulate">proof4</a> <a id="2298" class="Symbol">:</a> <a id="2300" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&lt;</a> <a id="2302" href="verificationStackScripts.demoEqualityReasoning.html#1989" class="Postulate">intermediateCond3</a> <a id="2320" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&gt;iff</a> <a id="2325" href="verificationStackScripts.demoEqualityReasoning.html#2075" class="Postulate">prog3</a> <a id="2331" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&lt;</a> <a id="2333" href="verificationStackScripts.demoEqualityReasoning.html#1876" class="Postulate">postcondition</a> <a id="2347" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&gt;</a>


<a id="theorem"></a><a id="2351" href="verificationStackScripts.demoEqualityReasoning.html#2351" class="Function">theorem</a> <a id="2359" class="Symbol">:</a> <a id="2361" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&lt;</a> <a id="2363" href="verificationStackScripts.demoEqualityReasoning.html#1842" class="Postulate">precondition</a> <a id="2376" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&gt;iff</a> <a id="2381" href="verificationStackScripts.demoEqualityReasoning.html#2039" class="Postulate">prog1</a> <a id="2387" href="libraries.listLib.html#559" class="Function Operator">++</a> <a id="2390" class="Symbol">(</a><a id="2391" href="verificationStackScripts.demoEqualityReasoning.html#2069" class="Postulate">prog2</a> <a id="2397" href="libraries.listLib.html#559" class="Function Operator">++</a> <a id="2400" href="verificationStackScripts.demoEqualityReasoning.html#2075" class="Postulate">prog3</a><a id="2405" class="Symbol">)</a>  <a id="2408" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&lt;</a>  <a id="2411" href="verificationStackScripts.demoEqualityReasoning.html#1876" class="Postulate">postcondition</a> <a id="2425" href="verificationStackScripts.stackHoareTriple.html#1619" class="Record Operator">&gt;</a>
<a id="2427" href="verificationStackScripts.demoEqualityReasoning.html#2351" class="Function">theorem</a> <a id="2435" class="Symbol">=</a>  <a id="2438" href="verificationStackScripts.demoEqualityReasoning.html#1842" class="Postulate">precondition</a>       <a id="2457" href="verificationStackScripts.stackHoareTriple.html#6925" class="Function">&lt;&gt;&lt;&gt;⟨</a>  <a id="2464" href="verificationStackScripts.demoEqualityReasoning.html#2039" class="Postulate">prog1</a>   <a id="2472" href="verificationStackScripts.stackHoareTriple.html#6925" class="Function">⟩⟨</a>  <a id="2476" href="verificationStackScripts.demoEqualityReasoning.html#2115" class="Postulate">proof1</a>  <a id="2484" href="verificationStackScripts.stackHoareTriple.html#6925" class="Function">⟩</a>
           <a id="2497" href="verificationStackScripts.demoEqualityReasoning.html#1911" class="Postulate">intermediateCond1</a>  <a id="2516" href="verificationStackScripts.stackHoareTriple.html#6925" class="Function">&lt;&gt;&lt;&gt;⟨</a>  <a id="2523" href="verificationStackScripts.demoEqualityReasoning.html#2069" class="Postulate">prog2</a>   <a id="2531" href="verificationStackScripts.stackHoareTriple.html#6925" class="Function">⟩⟨</a>  <a id="2535" href="verificationStackScripts.demoEqualityReasoning.html#2175" class="Postulate">proof2</a>  <a id="2543" href="verificationStackScripts.stackHoareTriple.html#6925" class="Function">⟩</a>
           <a id="2556" href="verificationStackScripts.demoEqualityReasoning.html#1950" class="Postulate">intermediateCond2</a>  <a id="2575" href="verificationStackScripts.stackHoareTriple.html#7376" class="Function">&lt;=&gt;⟨</a>   <a id="2582" href="verificationStackScripts.demoEqualityReasoning.html#2239" class="Postulate">proof3</a>  <a id="2590" href="verificationStackScripts.stackHoareTriple.html#7376" class="Function">⟩</a>
           <a id="2603" href="verificationStackScripts.demoEqualityReasoning.html#1989" class="Postulate">intermediateCond3</a>  <a id="2622" href="verificationStackScripts.stackHoareTriple.html#7166" class="Function">&lt;&gt;&lt;&gt;⟨</a>  <a id="2629" href="verificationStackScripts.demoEqualityReasoning.html#2075" class="Postulate">prog3</a>   <a id="2637" href="verificationStackScripts.stackHoareTriple.html#7166" class="Function">⟩⟨</a>  <a id="2641" href="verificationStackScripts.demoEqualityReasoning.html#2291" class="Postulate">proof4</a>  <a id="2649" href="verificationStackScripts.stackHoareTriple.html#7166" class="Function">⟩e</a>   <a id="2654" href="verificationStackScripts.demoEqualityReasoning.html#1876" class="Postulate">postcondition</a>  <a id="2669" href="verificationStackScripts.stackHoareTriple.html#6826" class="Function Operator">∎p</a>

</pre></body></html>