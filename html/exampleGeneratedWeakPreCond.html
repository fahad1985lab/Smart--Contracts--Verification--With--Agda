<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>exampleGeneratedWeakPreCond</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="basicBitcoinDataType.html" class="Module">basicBitcoinDataType</a>

<a id="35" class="Keyword">module</a> <a id="42" href="exampleGeneratedWeakPreCond.html" class="Module">exampleGeneratedWeakPreCond</a> <a id="70" class="Symbol">(</a><a id="71" href="exampleGeneratedWeakPreCond.html#71" class="Bound">param</a> <a id="77" class="Symbol">:</a> <a id="79" href="basicBitcoinDataType.html#1169" class="Record">GlobalParameters</a><a id="95" class="Symbol">)</a> <a id="97" class="Keyword">where</a>

<a id="104" class="Keyword">open</a> <a id="109" class="Keyword">import</a> <a id="116" href="libraries.listLib.html" class="Module">libraries.listLib</a>
<a id="134" class="Keyword">open</a> <a id="139" class="Keyword">import</a> <a id="146" href="Data.List.Base.html" class="Module">Data.List.Base</a>
<a id="161" class="Keyword">open</a> <a id="166" class="Keyword">import</a> <a id="173" href="libraries.natLib.html" class="Module">libraries.natLib</a>
<a id="190" class="Keyword">open</a> <a id="195" class="Keyword">import</a> <a id="202" href="Data.Nat.html" class="Module">Data.Nat</a>  <a id="212" class="Keyword">renaming</a> <a id="221" class="Symbol">(</a><a id="222" href="Data.Nat.Base.html#1535" class="Datatype Operator">_≤_</a> <a id="226" class="Symbol">to</a> <a id="229" class="Datatype Operator">_≤&#39;_</a> <a id="234" class="Symbol">;</a> <a id="236" href="Data.Nat.Base.html#1645" class="Function Operator">_&lt;_</a> <a id="240" class="Symbol">to</a> <a id="243" class="Function Operator">_&lt;&#39;_</a><a id="247" class="Symbol">)</a>
<a id="249" class="Keyword">open</a> <a id="254" class="Keyword">import</a> <a id="261" href="Data.List.html" class="Module">Data.List</a> <a id="271" class="Keyword">hiding</a> <a id="278" class="Symbol">(</a><a id="279" href="Data.List.Base.html#1810" class="Function Operator">_++_</a><a id="283" class="Symbol">)</a>
<a id="285" class="Keyword">open</a> <a id="290" class="Keyword">import</a> <a id="297" href="Data.Unit.html" class="Module">Data.Unit</a>  <a id="308" class="Keyword">hiding</a> <a id="315" class="Symbol">(</a><a id="316" href="Data.Unit.Base.html#1023" class="Record Operator">_≤_</a><a id="319" class="Symbol">)</a>
<a id="321" class="Keyword">open</a> <a id="326" class="Keyword">import</a> <a id="333" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="344" class="Keyword">open</a> <a id="349" class="Keyword">import</a> <a id="356" href="Data.Maybe.html" class="Module">Data.Maybe</a>
<a id="367" class="Keyword">open</a> <a id="372" class="Keyword">import</a> <a id="379" href="Data.Bool.html" class="Module">Data.Bool</a>  <a id="390" class="Keyword">hiding</a> <a id="397" class="Symbol">(</a><a id="398" href="Data.Bool.Base.html#672" class="Datatype Operator">_≤_</a> <a id="402" class="Symbol">;</a> <a id="404" href="Data.Bool.Base.html#751" class="Datatype Operator">_&lt;_</a> <a id="408" class="Symbol">;</a> <a id="410" href="Data.Bool.Base.html#1283" class="Function Operator">if_then_else_</a> <a id="424" class="Symbol">)</a> <a id="426" class="Keyword">renaming</a> <a id="435" class="Symbol">(</a><a id="436" href="Data.Bool.Base.html#986" class="Function Operator">_∧_</a> <a id="440" class="Symbol">to</a> <a id="443" class="Function Operator">_∧b_</a> <a id="448" class="Symbol">;</a> <a id="450" href="Data.Bool.Base.html#1044" class="Function Operator">_∨_</a> <a id="454" class="Symbol">to</a> <a id="457" class="Function Operator">_∨b_</a> <a id="462" class="Symbol">;</a> <a id="464" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="466" class="Symbol">to</a> <a id="469" class="Function">True</a><a id="473" class="Symbol">)</a>
<a id="475" class="Keyword">open</a> <a id="480" class="Keyword">import</a> <a id="487" href="Data.Product.html" class="Module">Data.Product</a> <a id="500" class="Keyword">renaming</a> <a id="509" class="Symbol">(</a><a id="510" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="514" class="Symbol">to</a> <a id="517" class="InductiveConstructor Operator">_,,_</a> <a id="522" class="Symbol">)</a>
<a id="524" class="Keyword">open</a> <a id="529" class="Keyword">import</a> <a id="536" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="550" class="Keyword">hiding</a> <a id="557" class="Symbol">(</a><a id="558" href="Data.Nat.Base.html#1535" class="Datatype Operator">_≤_</a> <a id="562" class="Symbol">;</a> <a id="564" href="Data.Nat.Base.html#1645" class="Function Operator">_&lt;_</a><a id="567" class="Symbol">)</a>
<a id="569" class="Keyword">open</a> <a id="574" class="Keyword">import</a> <a id="581" href="Data.List.NonEmpty.html" class="Module">Data.List.NonEmpty</a> <a id="600" class="Keyword">hiding</a> <a id="607" class="Symbol">(</a><a id="608" href="Data.List.NonEmpty.Base.html#1141" class="Field">head</a><a id="612" class="Symbol">;</a> <a id="614" href="Data.List.NonEmpty.Base.html#1268" class="Function Operator">[_]</a><a id="617" class="Symbol">)</a>
<a id="619" class="Keyword">open</a> <a id="624" class="Keyword">import</a> <a id="631" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="640" class="Keyword">using</a> <a id="646" class="Symbol">(</a><a id="647" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="648" class="Symbol">;</a> <a id="650" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a><a id="653" class="Symbol">;</a> <a id="655" href="Data.Nat.Base.html#1679" class="Function Operator">_≥_</a><a id="658" class="Symbol">;</a> <a id="660" href="Data.Nat.Base.html#1709" class="Function Operator">_&gt;_</a><a id="663" class="Symbol">;</a> <a id="665" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="669" class="Symbol">;</a> <a id="671" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="674" class="Symbol">;</a> <a id="676" href="Data.Nat.Base.html#1600" class="InductiveConstructor">s≤s</a><a id="679" class="Symbol">;</a> <a id="681" href="Data.Nat.Base.html#1558" class="InductiveConstructor">z≤n</a><a id="684" class="Symbol">)</a>
<a id="686" class="Keyword">import</a> <a id="693" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="731" class="Symbol">as</a> <a id="734" class="Module">Eq</a>
<a id="737" class="Keyword">open</a> <a id="742" href="Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="745" class="Keyword">using</a> <a id="751" class="Symbol">(</a><a id="752" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="755" class="Symbol">;</a> <a id="757" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="761" class="Symbol">;</a> <a id="763" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a><a id="767" class="Symbol">;</a> <a id="769" class="Keyword">module</a> <a id="776" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a><a id="787" class="Symbol">;</a> <a id="789" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a><a id="792" class="Symbol">)</a>
<a id="794" class="Keyword">open</a> <a id="799" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a>
<a id="811" class="Keyword">open</a> <a id="816" class="Keyword">import</a> <a id="823" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a>


<a id="847" class="Comment">--our libraries</a>
<a id="863" class="Keyword">open</a> <a id="868" class="Keyword">import</a> <a id="875" href="libraries.andLib.html" class="Module">libraries.andLib</a>
<a id="892" class="Keyword">open</a> <a id="897" class="Keyword">import</a> <a id="904" href="libraries.maybeLib.html" class="Module">libraries.maybeLib</a>
<a id="923" class="Keyword">open</a> <a id="928" class="Keyword">import</a> <a id="935" href="libraries.boolLib.html" class="Module">libraries.boolLib</a>

<a id="954" class="Keyword">open</a> <a id="959" class="Keyword">import</a> <a id="966" href="stack.html" class="Module">stack</a>
<a id="972" class="Keyword">open</a> <a id="977" class="Keyword">import</a> <a id="984" href="stackPredicate.html" class="Module">stackPredicate</a>
<a id="999" class="Keyword">open</a> <a id="1004" class="Keyword">import</a> <a id="1011" href="semanticBasicOperations.html" class="Module">semanticBasicOperations</a> <a id="1035" href="exampleGeneratedWeakPreCond.html#71" class="Bound">param</a>
<a id="1041" class="Keyword">open</a> <a id="1046" class="Keyword">import</a> <a id="1053" href="instructionBasic.html" class="Module">instructionBasic</a>
<a id="1070" class="Keyword">open</a> <a id="1075" class="Keyword">import</a> <a id="1082" href="verificationP2PKHbasic.html" class="Module">verificationP2PKHbasic</a> <a id="1105" href="exampleGeneratedWeakPreCond.html#71" class="Bound">param</a>

<a id="1112" class="Keyword">open</a> <a id="1117" class="Keyword">import</a> <a id="1124" href="verificationStackScripts.stackHoareTriple.html" class="Module">verificationStackScripts.stackHoareTriple</a> <a id="1166" href="exampleGeneratedWeakPreCond.html#71" class="Bound">param</a>
<a id="1172" class="Keyword">open</a> <a id="1177" class="Keyword">import</a> <a id="1184" href="verificationStackScripts.stackState.html" class="Module">verificationStackScripts.stackState</a>
<a id="1220" class="Keyword">open</a> <a id="1225" class="Keyword">import</a> <a id="1232" href="verificationStackScripts.sPredicate.html" class="Module">verificationStackScripts.sPredicate</a>
<a id="1268" class="Keyword">open</a> <a id="1273" class="Keyword">import</a> <a id="1280" href="verificationStackScripts.semanticsStackInstructions.html" class="Module">verificationStackScripts.semanticsStackInstructions</a> <a id="1332" href="exampleGeneratedWeakPreCond.html#71" class="Bound">param</a>
<a id="1338" class="Keyword">open</a> <a id="1343" class="Keyword">import</a> <a id="1350" href="verificationStackScripts.stackVerificationLemmas.html" class="Module">verificationStackScripts.stackVerificationLemmas</a> <a id="1399" href="exampleGeneratedWeakPreCond.html#71" class="Bound">param</a>



<a id="weakestPreCondˢ"></a><a id="1408" href="exampleGeneratedWeakPreCond.html#1408" class="Function">weakestPreCondˢ</a> <a id="1424" class="Symbol">:</a> <a id="1426" href="instructionBasic.html#1042" class="Function">BitcoinScriptBasic</a> <a id="1445" class="Symbol">→</a> <a id="1447" href="verificationStackScripts.sPredicate.html#1186" class="Function">StackStatePred</a> <a id="1462" class="Symbol">→</a> <a id="1464" href="verificationStackScripts.sPredicate.html#1186" class="Function">StackStatePred</a>
<a id="1479" href="exampleGeneratedWeakPreCond.html#1408" class="Function">weakestPreCondˢ</a> <a id="1495" href="exampleGeneratedWeakPreCond.html#1495" class="Bound">p</a> <a id="1497" href="exampleGeneratedWeakPreCond.html#1497" class="Bound">φ</a> <a id="1499" href="exampleGeneratedWeakPreCond.html#1499" class="Bound">s</a> <a id="1501" class="Symbol">=</a> <a id="1503" class="Symbol">(</a><a id="1504" href="exampleGeneratedWeakPreCond.html#1497" class="Bound">φ</a> <a id="1506" href="libraries.maybeLib.html#1221" class="Function Operator">⁺</a><a id="1507" class="Symbol">)</a> <a id="1509" class="Symbol">(</a><a id="1510" href="verificationStackScripts.semanticsStackInstructions.html#1260" class="Function Operator">⟦</a> <a id="1512" href="exampleGeneratedWeakPreCond.html#1495" class="Bound">p</a> <a id="1514" href="verificationStackScripts.semanticsStackInstructions.html#1260" class="Function Operator">⟧</a> <a id="1516" href="exampleGeneratedWeakPreCond.html#1499" class="Bound">s</a><a id="1517" class="Symbol">)</a>


<a id="testprog"></a><a id="1521" href="exampleGeneratedWeakPreCond.html#1521" class="Function">testprog</a> <a id="1530" class="Symbol">:</a> <a id="1532" href="instructionBasic.html#1042" class="Function">BitcoinScriptBasic</a>
<a id="1551" href="exampleGeneratedWeakPreCond.html#1521" class="Function">testprog</a> <a id="1560" class="Symbol">=</a> <a id="1562" href="instructionBasic.html#819" class="InductiveConstructor">opDrop</a> <a id="1569" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1571" href="instructionBasic.html#819" class="InductiveConstructor">opDrop</a> <a id="1578" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1580" href="Data.List.Base.html#5025" class="Function Operator">[</a> <a id="1582" href="instructionBasic.html#819" class="InductiveConstructor">opDrop</a> <a id="1589" href="Data.List.Base.html#5025" class="Function Operator">]</a>

<a id="weakestPreCondTestProg"></a><a id="1592" href="exampleGeneratedWeakPreCond.html#1592" class="Function">weakestPreCondTestProg</a> <a id="1615" class="Symbol">:</a> <a id="1617" href="verificationStackScripts.sPredicate.html#1186" class="Function">StackStatePred</a>
<a id="1632" href="exampleGeneratedWeakPreCond.html#1592" class="Function">weakestPreCondTestProg</a> <a id="1655" class="Symbol">=</a> <a id="1657" href="exampleGeneratedWeakPreCond.html#1408" class="Function">weakestPreCondˢ</a> <a id="1673" href="exampleGeneratedWeakPreCond.html#1521" class="Function">testprog</a> <a id="1682" href="verificationStackScripts.sPredicate.html#3283" class="Function">acceptState</a>



<a id="weakestPreCondTestProgNormalised"></a><a id="1697" href="exampleGeneratedWeakPreCond.html#1697" class="Function">weakestPreCondTestProgNormalised</a> <a id="1730" class="Symbol">:</a> <a id="1732" href="verificationStackScripts.sPredicate.html#1186" class="Function">StackStatePred</a>
<a id="1747" href="exampleGeneratedWeakPreCond.html#1697" class="Function">weakestPreCondTestProgNormalised</a> <a id="1780" href="exampleGeneratedWeakPreCond.html#1780" class="Bound">s</a> <a id="1782" class="Symbol">=</a>
  <a id="1786" class="Symbol">(</a><a id="1787" href="verificationStackScripts.sPredicate.html#2328" class="Function">stackPred2SPred</a> <a id="1803" href="stackPredicate.html#1335" class="Function">acceptStateˢ</a> <a id="1816" href="libraries.maybeLib.html#1221" class="Function Operator">⁺</a><a id="1817" class="Symbol">)</a>
   <a id="1822" class="Symbol">(</a><a id="1823" href="verificationStackScripts.stackState.html#1477" class="Function">stackState2WithMaybe</a> <a id="1844" href="verificationStackScripts.stackState.html#1240" class="InductiveConstructor Operator">⟨</a> <a id="1846" href="verificationStackScripts.stackState.html#997" class="Field">currentTime</a> <a id="1858" href="exampleGeneratedWeakPreCond.html#1780" class="Bound">s</a> <a id="1860" href="verificationStackScripts.stackState.html#1240" class="InductiveConstructor Operator">,</a> <a id="1862" href="verificationStackScripts.stackState.html#1099" class="Field">msg</a> <a id="1866" href="exampleGeneratedWeakPreCond.html#1780" class="Bound">s</a> <a id="1868" href="verificationStackScripts.stackState.html#1240" class="InductiveConstructor Operator">,</a> <a id="1870" href="semanticBasicOperations.html#2211" class="Function">executeStackDrop</a> <a id="1887" class="Symbol">(</a><a id="1888" href="verificationStackScripts.stackState.html#1132" class="Field">stack</a> <a id="1894" href="exampleGeneratedWeakPreCond.html#1780" class="Bound">s</a><a id="1895" class="Symbol">)</a> <a id="1897" href="verificationStackScripts.stackState.html#1240" class="InductiveConstructor Operator">⟩</a>
   <a id="1902" href="Data.Maybe.Base.html#2227" class="Function Operator">&gt;&gt;=</a>  <a id="1907" class="Symbol">(λ</a> <a id="1910" href="exampleGeneratedWeakPreCond.html#1910" class="Bound">s₁</a> <a id="1913" class="Symbol">→</a> <a id="1915" href="verificationStackScripts.stackState.html#1477" class="Function">stackState2WithMaybe</a>  <a id="1937" href="verificationStackScripts.stackState.html#1240" class="InductiveConstructor Operator">⟨</a> <a id="1939" href="verificationStackScripts.stackState.html#997" class="Field">currentTime</a> <a id="1951" href="exampleGeneratedWeakPreCond.html#1910" class="Bound">s₁</a> <a id="1954" href="verificationStackScripts.stackState.html#1240" class="InductiveConstructor Operator">,</a> <a id="1956" href="verificationStackScripts.stackState.html#1099" class="Field">msg</a> <a id="1960" href="exampleGeneratedWeakPreCond.html#1910" class="Bound">s₁</a> <a id="1963" href="verificationStackScripts.stackState.html#1240" class="InductiveConstructor Operator">,</a> <a id="1965" href="semanticBasicOperations.html#2211" class="Function">executeStackDrop</a> <a id="1982" class="Symbol">(</a><a id="1983" href="verificationStackScripts.stackState.html#1132" class="Field">stack</a> <a id="1989" href="exampleGeneratedWeakPreCond.html#1910" class="Bound">s₁</a><a id="1991" class="Symbol">)</a> <a id="1993" href="verificationStackScripts.stackState.html#1240" class="InductiveConstructor Operator">⟩</a>
                 <a id="2012" href="Data.Maybe.Base.html#2227" class="Function Operator">&gt;&gt;=</a>  <a id="2017" href="verificationStackScripts.stackState.html#3075" class="Function">liftStackFun2StackState</a>  <a id="2042" class="Symbol">(λ</a> <a id="2045" href="exampleGeneratedWeakPreCond.html#2045" class="Bound">time₁</a> <a id="2051" href="exampleGeneratedWeakPreCond.html#2051" class="Bound">msg₁</a> <a id="2056" class="Symbol">→</a> <a id="2058" href="semanticBasicOperations.html#2211" class="Function">executeStackDrop</a><a id="2074" class="Symbol">)))</a>

</pre></body></html>