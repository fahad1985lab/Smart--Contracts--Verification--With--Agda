<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>exampleGeneratedWeakPreCond</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="basicBitcoinDataType.html" class="Module">basicBitcoinDataType</a>

<a id="35" class="Keyword">module</a> <a id="42" href="exampleGeneratedWeakPreCond.html" class="Module">exampleGeneratedWeakPreCond</a> <a id="70" class="Symbol">(</a><a id="71" href="exampleGeneratedWeakPreCond.html#71" class="Bound">param</a> <a id="77" class="Symbol">:</a> <a id="79" href="basicBitcoinDataType.html#1157" class="Record">GlobalParameters</a><a id="95" class="Symbol">)</a> <a id="97" class="Keyword">where</a>

<a id="104" class="Keyword">open</a> <a id="109" class="Keyword">import</a> <a id="116" href="libraries.listLib.html" class="Module">libraries.listLib</a>
<a id="134" class="Keyword">open</a> <a id="139" class="Keyword">import</a> <a id="146" href="Data.List.Base.html" class="Module">Data.List.Base</a>
<a id="161" class="Keyword">open</a> <a id="166" class="Keyword">import</a> <a id="173" href="libraries.natLib.html" class="Module">libraries.natLib</a>
<a id="190" class="Keyword">open</a> <a id="195" class="Keyword">import</a> <a id="202" href="Data.Nat.html" class="Module">Data.Nat</a>  <a id="212" class="Keyword">renaming</a> <a id="221" class="Symbol">(</a><a id="222" href="Data.Nat.Base.html#1691" class="Datatype Operator">_≤_</a> <a id="226" class="Symbol">to</a> <a id="229" class="Datatype Operator">_≤&#39;_</a> <a id="234" class="Symbol">;</a> <a id="236" href="Data.Nat.Base.html#1801" class="Function Operator">_&lt;_</a> <a id="240" class="Symbol">to</a> <a id="243" class="Function Operator">_&lt;&#39;_</a><a id="247" class="Symbol">)</a>
<a id="249" class="Keyword">open</a> <a id="254" class="Keyword">import</a> <a id="261" href="Data.List.html" class="Module">Data.List</a> <a id="271" class="Keyword">hiding</a> <a id="278" class="Symbol">(</a><a id="279" href="Data.List.Base.html#1954" class="Function Operator">_++_</a><a id="283" class="Symbol">)</a>
<a id="285" class="Keyword">open</a> <a id="290" class="Keyword">import</a> <a id="297" href="Data.Unit.html" class="Module">Data.Unit</a>  
<a id="309" class="Keyword">open</a> <a id="314" class="Keyword">import</a> <a id="321" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="332" class="Keyword">open</a> <a id="337" class="Keyword">import</a> <a id="344" href="Data.Maybe.html" class="Module">Data.Maybe</a>
<a id="355" class="Keyword">open</a> <a id="360" class="Keyword">import</a> <a id="367" href="Data.Bool.html" class="Module">Data.Bool</a>  <a id="378" class="Keyword">hiding</a> <a id="385" class="Symbol">(</a><a id="386" href="Data.Bool.Base.html#681" class="Datatype Operator">_≤_</a> <a id="390" class="Symbol">;</a> <a id="392" href="Data.Bool.Base.html#760" class="Datatype Operator">_&lt;_</a> <a id="396" class="Symbol">;</a> <a id="398" href="Data.Bool.Base.html#1505" class="Function Operator">if_then_else_</a> <a id="412" class="Symbol">)</a> <a id="414" class="Keyword">renaming</a> <a id="423" class="Symbol">(</a><a id="424" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> <a id="428" class="Symbol">to</a> <a id="431" class="Function Operator">_∧b_</a> <a id="436" class="Symbol">;</a> <a id="438" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a> <a id="442" class="Symbol">to</a> <a id="445" class="Function Operator">_∨b_</a> <a id="450" class="Symbol">;</a> <a id="452" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="454" class="Symbol">to</a> <a id="457" class="Function">True</a><a id="461" class="Symbol">)</a>
<a id="463" class="Keyword">open</a> <a id="468" class="Keyword">import</a> <a id="475" href="Data.Product.html" class="Module">Data.Product</a> <a id="488" class="Keyword">renaming</a> <a id="497" class="Symbol">(</a><a id="498" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a> <a id="502" class="Symbol">to</a> <a id="505" class="InductiveConstructor Operator">_,,_</a> <a id="510" class="Symbol">)</a>
<a id="512" class="Keyword">open</a> <a id="517" class="Keyword">import</a> <a id="524" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="538" class="Keyword">hiding</a> <a id="545" class="Symbol">(</a><a id="546" href="Data.Nat.Base.html#1691" class="Datatype Operator">_≤_</a> <a id="550" class="Symbol">;</a> <a id="552" href="Data.Nat.Base.html#1801" class="Function Operator">_&lt;_</a><a id="555" class="Symbol">)</a>
<a id="557" class="Keyword">open</a> <a id="562" class="Keyword">import</a> <a id="569" href="Data.List.NonEmpty.html" class="Module">Data.List.NonEmpty</a> <a id="588" class="Keyword">hiding</a> <a id="595" class="Symbol">(</a><a id="596" href="Data.List.NonEmpty.Base.html#1291" class="Field">head</a><a id="600" class="Symbol">;</a> <a id="602" href="Data.List.NonEmpty.Base.html#1491" class="Function Operator">[_]</a><a id="605" class="Symbol">)</a>
<a id="607" class="Keyword">open</a> <a id="612" class="Keyword">import</a> <a id="619" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="628" class="Keyword">using</a> <a id="634" class="Symbol">(</a><a id="635" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="636" class="Symbol">;</a> <a id="638" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">_+_</a><a id="641" class="Symbol">;</a> <a id="643" href="Data.Nat.Base.html#2259" class="Function Operator">_≥_</a><a id="646" class="Symbol">;</a> <a id="648" href="Data.Nat.Base.html#2289" class="Function Operator">_&gt;_</a><a id="651" class="Symbol">;</a> <a id="653" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="657" class="Symbol">;</a> <a id="659" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a><a id="662" class="Symbol">;</a> <a id="664" href="Data.Nat.Base.html#1756" class="InductiveConstructor">s≤s</a><a id="667" class="Symbol">;</a> <a id="669" href="Data.Nat.Base.html#1714" class="InductiveConstructor">z≤n</a><a id="672" class="Symbol">)</a>
<a id="674" class="Keyword">import</a> <a id="681" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="719" class="Symbol">as</a> <a id="722" class="Module">Eq</a>
<a id="725" class="Keyword">open</a> <a id="730" href="Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="733" class="Keyword">using</a> <a id="739" class="Symbol">(</a><a id="740" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="743" class="Symbol">;</a> <a id="745" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="749" class="Symbol">;</a> <a id="751" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a><a id="755" class="Symbol">;</a> <a id="757" class="Keyword">module</a> <a id="764" href="Relation.Binary.PropositionalEquality.Properties.html#6744" class="Module">≡-Reasoning</a><a id="775" class="Symbol">;</a> <a id="777" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a><a id="780" class="Symbol">)</a>
<a id="782" class="Keyword">open</a> <a id="787" href="Relation.Binary.PropositionalEquality.Properties.html#6744" class="Module">≡-Reasoning</a>
<a id="799" class="Keyword">open</a> <a id="804" class="Keyword">import</a> <a id="811" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a>


<a id="835" class="Comment">--our libraries</a>
<a id="851" class="Keyword">open</a> <a id="856" class="Keyword">import</a> <a id="863" href="libraries.andLib.html" class="Module">libraries.andLib</a>
<a id="880" class="Keyword">open</a> <a id="885" class="Keyword">import</a> <a id="892" href="libraries.maybeLib.html" class="Module">libraries.maybeLib</a>
<a id="911" class="Keyword">open</a> <a id="916" class="Keyword">import</a> <a id="923" href="libraries.boolLib.html" class="Module">libraries.boolLib</a>

<a id="942" class="Keyword">open</a> <a id="947" class="Keyword">import</a> <a id="954" href="stack.html" class="Module">stack</a>
<a id="960" class="Keyword">open</a> <a id="965" class="Keyword">import</a> <a id="972" href="stackPredicate.html" class="Module">stackPredicate</a>
<a id="987" class="Keyword">open</a> <a id="992" class="Keyword">import</a> <a id="999" href="semanticBasicOperations.html" class="Module">semanticBasicOperations</a> <a id="1023" href="exampleGeneratedWeakPreCond.html#71" class="Bound">param</a>
<a id="1029" class="Keyword">open</a> <a id="1034" class="Keyword">import</a> <a id="1041" href="instructionBasic.html" class="Module">instructionBasic</a>
<a id="1058" class="Keyword">open</a> <a id="1063" class="Keyword">import</a> <a id="1070" href="verificationP2PKHbasic.html" class="Module">verificationP2PKHbasic</a> <a id="1093" href="exampleGeneratedWeakPreCond.html#71" class="Bound">param</a>

<a id="1100" class="Keyword">open</a> <a id="1105" class="Keyword">import</a> <a id="1112" href="verificationStackScripts.stackHoareTriple.html" class="Module">verificationStackScripts.stackHoareTriple</a> <a id="1154" href="exampleGeneratedWeakPreCond.html#71" class="Bound">param</a>
<a id="1160" class="Keyword">open</a> <a id="1165" class="Keyword">import</a> <a id="1172" href="verificationStackScripts.stackState.html" class="Module">verificationStackScripts.stackState</a>
<a id="1208" class="Keyword">open</a> <a id="1213" class="Keyword">import</a> <a id="1220" href="verificationStackScripts.sPredicate.html" class="Module">verificationStackScripts.sPredicate</a>
<a id="1256" class="Keyword">open</a> <a id="1261" class="Keyword">import</a> <a id="1268" href="verificationStackScripts.semanticsStackInstructions.html" class="Module">verificationStackScripts.semanticsStackInstructions</a> <a id="1320" href="exampleGeneratedWeakPreCond.html#71" class="Bound">param</a>
<a id="1326" class="Keyword">open</a> <a id="1331" class="Keyword">import</a> <a id="1338" href="verificationStackScripts.stackVerificationLemmas.html" class="Module">verificationStackScripts.stackVerificationLemmas</a> <a id="1387" href="exampleGeneratedWeakPreCond.html#71" class="Bound">param</a>



<a id="weakestPreCondˢ"></a><a id="1396" href="exampleGeneratedWeakPreCond.html#1396" class="Function">weakestPreCondˢ</a> <a id="1412" class="Symbol">:</a> <a id="1414" href="instructionBasic.html#1030" class="Function">BitcoinScriptBasic</a> <a id="1433" class="Symbol">→</a> <a id="1435" href="verificationStackScripts.sPredicate.html#1174" class="Function">StackStatePred</a> <a id="1450" class="Symbol">→</a> <a id="1452" href="verificationStackScripts.sPredicate.html#1174" class="Function">StackStatePred</a>
<a id="1467" href="exampleGeneratedWeakPreCond.html#1396" class="Function">weakestPreCondˢ</a> <a id="1483" href="exampleGeneratedWeakPreCond.html#1483" class="Bound">p</a> <a id="1485" href="exampleGeneratedWeakPreCond.html#1485" class="Bound">φ</a> <a id="1487" href="exampleGeneratedWeakPreCond.html#1487" class="Bound">s</a> <a id="1489" class="Symbol">=</a> <a id="1491" class="Symbol">(</a><a id="1492" href="exampleGeneratedWeakPreCond.html#1485" class="Bound">φ</a> <a id="1494" href="libraries.maybeLib.html#1221" class="Function Operator">⁺</a><a id="1495" class="Symbol">)</a> <a id="1497" class="Symbol">(</a><a id="1498" href="verificationStackScripts.semanticsStackInstructions.html#1248" class="Function Operator">⟦</a> <a id="1500" href="exampleGeneratedWeakPreCond.html#1483" class="Bound">p</a> <a id="1502" href="verificationStackScripts.semanticsStackInstructions.html#1248" class="Function Operator">⟧</a> <a id="1504" href="exampleGeneratedWeakPreCond.html#1487" class="Bound">s</a><a id="1505" class="Symbol">)</a>


<a id="testprog"></a><a id="1509" href="exampleGeneratedWeakPreCond.html#1509" class="Function">testprog</a> <a id="1518" class="Symbol">:</a> <a id="1520" href="instructionBasic.html#1030" class="Function">BitcoinScriptBasic</a>
<a id="1539" href="exampleGeneratedWeakPreCond.html#1509" class="Function">testprog</a> <a id="1548" class="Symbol">=</a> <a id="1550" href="instructionBasic.html#807" class="InductiveConstructor">opDrop</a> <a id="1557" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1559" href="instructionBasic.html#807" class="InductiveConstructor">opDrop</a> <a id="1566" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1568" href="Data.List.Base.html#5244" class="Function Operator">[</a> <a id="1570" href="instructionBasic.html#807" class="InductiveConstructor">opDrop</a> <a id="1577" href="Data.List.Base.html#5244" class="Function Operator">]</a>

<a id="weakestPreCondTestProg"></a><a id="1580" href="exampleGeneratedWeakPreCond.html#1580" class="Function">weakestPreCondTestProg</a> <a id="1603" class="Symbol">:</a> <a id="1605" href="verificationStackScripts.sPredicate.html#1174" class="Function">StackStatePred</a>
<a id="1620" href="exampleGeneratedWeakPreCond.html#1580" class="Function">weakestPreCondTestProg</a> <a id="1643" class="Symbol">=</a> <a id="1645" href="exampleGeneratedWeakPreCond.html#1396" class="Function">weakestPreCondˢ</a> <a id="1661" href="exampleGeneratedWeakPreCond.html#1509" class="Function">testprog</a> <a id="1670" href="verificationStackScripts.sPredicate.html#3271" class="Function">acceptState</a>



<a id="weakestPreCondTestProgNormalised"></a><a id="1685" href="exampleGeneratedWeakPreCond.html#1685" class="Function">weakestPreCondTestProgNormalised</a> <a id="1718" class="Symbol">:</a> <a id="1720" href="verificationStackScripts.sPredicate.html#1174" class="Function">StackStatePred</a>
<a id="1735" href="exampleGeneratedWeakPreCond.html#1685" class="Function">weakestPreCondTestProgNormalised</a> <a id="1768" href="exampleGeneratedWeakPreCond.html#1768" class="Bound">s</a> <a id="1770" class="Symbol">=</a>
  <a id="1774" class="Symbol">(</a><a id="1775" href="verificationStackScripts.sPredicate.html#2316" class="Function">stackPred2SPred</a> <a id="1791" href="stackPredicate.html#1323" class="Function">acceptStateˢ</a> <a id="1804" href="libraries.maybeLib.html#1221" class="Function Operator">⁺</a><a id="1805" class="Symbol">)</a>
   <a id="1810" class="Symbol">(</a><a id="1811" href="verificationStackScripts.stackState.html#1465" class="Function">stackState2WithMaybe</a> <a id="1832" href="verificationStackScripts.stackState.html#1228" class="InductiveConstructor Operator">⟨</a> <a id="1834" href="verificationStackScripts.stackState.html#985" class="Field">currentTime</a> <a id="1846" href="exampleGeneratedWeakPreCond.html#1768" class="Bound">s</a> <a id="1848" href="verificationStackScripts.stackState.html#1228" class="InductiveConstructor Operator">,</a> <a id="1850" href="verificationStackScripts.stackState.html#1087" class="Field">msg</a> <a id="1854" href="exampleGeneratedWeakPreCond.html#1768" class="Bound">s</a> <a id="1856" href="verificationStackScripts.stackState.html#1228" class="InductiveConstructor Operator">,</a> <a id="1858" href="semanticBasicOperations.html#2199" class="Function">executeStackDrop</a> <a id="1875" class="Symbol">(</a><a id="1876" href="verificationStackScripts.stackState.html#1120" class="Field">stack</a> <a id="1882" href="exampleGeneratedWeakPreCond.html#1768" class="Bound">s</a><a id="1883" class="Symbol">)</a> <a id="1885" href="verificationStackScripts.stackState.html#1228" class="InductiveConstructor Operator">⟩</a>
   <a id="1890" href="Data.Maybe.Base.html#2256" class="Function Operator">&gt;&gt;=</a>  <a id="1895" class="Symbol">(λ</a> <a id="1898" href="exampleGeneratedWeakPreCond.html#1898" class="Bound">s₁</a> <a id="1901" class="Symbol">→</a> <a id="1903" href="verificationStackScripts.stackState.html#1465" class="Function">stackState2WithMaybe</a>  <a id="1925" href="verificationStackScripts.stackState.html#1228" class="InductiveConstructor Operator">⟨</a> <a id="1927" href="verificationStackScripts.stackState.html#985" class="Field">currentTime</a> <a id="1939" href="exampleGeneratedWeakPreCond.html#1898" class="Bound">s₁</a> <a id="1942" href="verificationStackScripts.stackState.html#1228" class="InductiveConstructor Operator">,</a> <a id="1944" href="verificationStackScripts.stackState.html#1087" class="Field">msg</a> <a id="1948" href="exampleGeneratedWeakPreCond.html#1898" class="Bound">s₁</a> <a id="1951" href="verificationStackScripts.stackState.html#1228" class="InductiveConstructor Operator">,</a> <a id="1953" href="semanticBasicOperations.html#2199" class="Function">executeStackDrop</a> <a id="1970" class="Symbol">(</a><a id="1971" href="verificationStackScripts.stackState.html#1120" class="Field">stack</a> <a id="1977" href="exampleGeneratedWeakPreCond.html#1898" class="Bound">s₁</a><a id="1979" class="Symbol">)</a> <a id="1981" href="verificationStackScripts.stackState.html#1228" class="InductiveConstructor Operator">⟩</a>
                 <a id="2000" href="Data.Maybe.Base.html#2256" class="Function Operator">&gt;&gt;=</a>  <a id="2005" href="verificationStackScripts.stackState.html#3063" class="Function">liftStackFun2StackState</a>  <a id="2030" class="Symbol">(λ</a> <a id="2033" href="exampleGeneratedWeakPreCond.html#2033" class="Bound">time₁</a> <a id="2039" href="exampleGeneratedWeakPreCond.html#2039" class="Bound">msg₁</a> <a id="2044" class="Symbol">→</a> <a id="2046" href="semanticBasicOperations.html#2199" class="Function">executeStackDrop</a><a id="2062" class="Symbol">)))</a>

</pre></body></html>