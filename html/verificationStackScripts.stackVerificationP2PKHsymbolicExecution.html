<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>verificationStackScripts.stackVerificationP2PKHsymbolicExecution</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="basicBitcoinDataType.html" class="Module">basicBitcoinDataType</a>

<a id="35" class="Keyword">module</a> <a id="42" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html" class="Module">verificationStackScripts.stackVerificationP2PKHsymbolicExecution</a> <a id="107" class="Symbol">(</a><a id="108" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#108" class="Bound">param</a> <a id="114" class="Symbol">:</a> <a id="116" href="basicBitcoinDataType.html#1169" class="Record">GlobalParameters</a><a id="132" class="Symbol">)</a>  <a id="135" class="Keyword">where</a>



<a id="144" class="Keyword">open</a> <a id="149" class="Keyword">import</a> <a id="156" href="Data.Nat.html" class="Module">Data.Nat</a>  <a id="166" class="Keyword">hiding</a> <a id="173" class="Symbol">(</a><a id="174" href="Data.Nat.Base.html#1535" class="Datatype Operator">_≤_</a><a id="177" class="Symbol">)</a>
<a id="179" class="Keyword">open</a> <a id="184" class="Keyword">import</a> <a id="191" href="Data.List.html" class="Module">Data.List</a> <a id="201" class="Keyword">hiding</a> <a id="208" class="Symbol">(</a><a id="209" href="Data.List.Base.html#1810" class="Function Operator">_++_</a><a id="213" class="Symbol">)</a>
<a id="215" class="Keyword">open</a> <a id="220" class="Keyword">import</a> <a id="227" href="Data.Unit.html" class="Module">Data.Unit</a>  <a id="238" class="Keyword">hiding</a> <a id="245" class="Symbol">(</a><a id="246" href="Data.Unit.Base.html#1023" class="Record Operator">_≤_</a><a id="249" class="Symbol">)</a>
<a id="251" class="Keyword">open</a> <a id="256" class="Keyword">import</a> <a id="263" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="274" class="Keyword">open</a> <a id="279" class="Keyword">import</a> <a id="286" href="Data.Sum.html" class="Module">Data.Sum</a>
<a id="295" class="Keyword">open</a> <a id="300" class="Keyword">import</a> <a id="307" href="Data.Bool.html" class="Module">Data.Bool</a>  <a id="318" class="Keyword">hiding</a> <a id="325" class="Symbol">(</a><a id="326" href="Data.Bool.Base.html#672" class="Datatype Operator">_≤_</a> <a id="330" class="Symbol">;</a> <a id="332" href="Data.Bool.Base.html#1283" class="Function Operator">if_then_else_</a> <a id="346" class="Symbol">)</a> <a id="348" class="Keyword">renaming</a> <a id="357" class="Symbol">(</a><a id="358" href="Data.Bool.Base.html#986" class="Function Operator">_∧_</a> <a id="362" class="Symbol">to</a> <a id="365" class="Function Operator">_∧b_</a> <a id="370" class="Symbol">;</a> <a id="372" href="Data.Bool.Base.html#1044" class="Function Operator">_∨_</a> <a id="376" class="Symbol">to</a> <a id="379" class="Function Operator">_∨b_</a> <a id="384" class="Symbol">;</a> <a id="386" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="388" class="Symbol">to</a> <a id="391" class="Function">True</a><a id="395" class="Symbol">)</a>
<a id="397" class="Keyword">open</a> <a id="402" class="Keyword">import</a> <a id="409" href="Data.Product.html" class="Module">Data.Product</a> <a id="422" class="Keyword">renaming</a> <a id="431" class="Symbol">(</a><a id="432" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="436" class="Symbol">to</a> <a id="439" class="InductiveConstructor Operator">_,,_</a> <a id="444" class="Symbol">)</a>
<a id="446" class="Keyword">open</a> <a id="451" class="Keyword">import</a> <a id="458" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="472" class="Keyword">hiding</a> <a id="479" class="Symbol">(</a><a id="480" href="Data.Nat.Base.html#1535" class="Datatype Operator">_≤_</a><a id="483" class="Symbol">)</a>
<a id="485" class="Keyword">open</a> <a id="490" class="Keyword">import</a> <a id="497" href="Data.List.NonEmpty.html" class="Module">Data.List.NonEmpty</a> <a id="516" class="Keyword">hiding</a> <a id="523" class="Symbol">(</a><a id="524" href="Data.List.NonEmpty.Base.html#1141" class="Field">head</a> <a id="529" class="Symbol">;</a> <a id="531" href="Data.List.NonEmpty.Base.html#1268" class="Function Operator">[_]</a> <a id="535" class="Symbol">)</a>
<a id="537" class="Keyword">open</a> <a id="542" class="Keyword">import</a> <a id="549" href="Data.Maybe.html" class="Module">Data.Maybe</a>
<a id="560" class="Keyword">open</a> <a id="565" class="Keyword">import</a> <a id="572" href="Relation.Nullary.html" class="Module">Relation.Nullary</a>

<a id="590" class="Keyword">import</a> <a id="597" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="635" class="Symbol">as</a> <a id="638" class="Module">Eq</a>
<a id="641" class="Keyword">open</a> <a id="646" href="Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="649" class="Keyword">using</a> <a id="655" class="Symbol">(</a><a id="656" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="659" class="Symbol">;</a> <a id="661" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="665" class="Symbol">;</a> <a id="667" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a><a id="671" class="Symbol">;</a> <a id="673" class="Keyword">module</a> <a id="680" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a><a id="691" class="Symbol">;</a> <a id="693" href="Relation.Binary.PropositionalEquality.Core.html#1684" class="Function">sym</a><a id="696" class="Symbol">)</a>
<a id="698" class="Keyword">open</a> <a id="703" href="Relation.Binary.PropositionalEquality.Core.html#2708" class="Module">≡-Reasoning</a>
<a id="715" class="Keyword">open</a> <a id="720" class="Keyword">import</a> <a id="727" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a>


<a id="751" class="Comment">--our libraries</a>
<a id="767" class="Keyword">open</a> <a id="772" class="Keyword">import</a> <a id="779" href="libraries.listLib.html" class="Module">libraries.listLib</a>
<a id="797" class="Keyword">open</a> <a id="802" class="Keyword">import</a> <a id="809" href="libraries.equalityLib.html" class="Module">libraries.equalityLib</a>
<a id="831" class="Keyword">open</a> <a id="836" class="Keyword">import</a> <a id="843" href="libraries.natLib.html" class="Module">libraries.natLib</a>
<a id="860" class="Keyword">open</a> <a id="865" class="Keyword">import</a> <a id="872" href="libraries.boolLib.html" class="Module">libraries.boolLib</a>
<a id="890" class="Keyword">open</a> <a id="895" class="Keyword">import</a> <a id="902" href="libraries.emptyLib.html" class="Module">libraries.emptyLib</a>
<a id="921" class="Keyword">open</a> <a id="926" class="Keyword">import</a> <a id="933" href="libraries.andLib.html" class="Module">libraries.andLib</a>
<a id="950" class="Keyword">open</a> <a id="955" class="Keyword">import</a> <a id="962" href="libraries.maybeLib.html" class="Module">libraries.maybeLib</a>

<a id="982" class="Keyword">open</a> <a id="987" class="Keyword">import</a> <a id="994" href="stack.html" class="Module">stack</a>
<a id="1000" class="Keyword">open</a> <a id="1005" class="Keyword">import</a> <a id="1012" href="stackPredicate.html" class="Module">stackPredicate</a>
<a id="1027" class="Keyword">open</a> <a id="1032" class="Keyword">import</a> <a id="1039" href="semanticBasicOperations.html" class="Module">semanticBasicOperations</a> <a id="1063" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#108" class="Bound">param</a>
<a id="1069" class="Keyword">open</a> <a id="1074" class="Keyword">import</a> <a id="1081" href="hoareTripleStack.html" class="Module">hoareTripleStack</a> <a id="1098" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#108" class="Bound">param</a>
<a id="1104" class="Keyword">open</a> <a id="1109" class="Keyword">import</a> <a id="1116" href="instruction.html" class="Module">instruction</a>
<a id="1128" class="Keyword">open</a> <a id="1133" class="Keyword">import</a> <a id="1140" href="verificationStackScripts.stackState.html" class="Module">verificationStackScripts.stackState</a>
<a id="1176" class="Keyword">open</a> <a id="1181" class="Keyword">import</a> <a id="1188" href="verificationStackScripts.sPredicate.html" class="Module">verificationStackScripts.sPredicate</a>
<a id="1224" class="Keyword">open</a> <a id="1229" class="Keyword">import</a> <a id="1236" href="verificationStackScripts.stackHoareTriple.html" class="Module">verificationStackScripts.stackHoareTriple</a> <a id="1278" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#108" class="Bound">param</a>
<a id="1284" class="Keyword">open</a> <a id="1289" class="Keyword">import</a> <a id="1296" href="verificationStackScripts.stackVerificationLemmas.html" class="Module">verificationStackScripts.stackVerificationLemmas</a> <a id="1345" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#108" class="Bound">param</a>
<a id="1351" class="Keyword">open</a> <a id="1356" class="Keyword">import</a> <a id="1363" href="verificationStackScripts.stackSemanticsInstructionsBasic.html" class="Module">verificationStackScripts.stackSemanticsInstructionsBasic</a> <a id="1420" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#108" class="Bound">param</a>
<a id="1426" class="Keyword">open</a> <a id="1431" class="Keyword">import</a> <a id="1438" href="verificationStackScripts.semanticsStackInstructions.html" class="Module">verificationStackScripts.semanticsStackInstructions</a> <a id="1490" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#108" class="Bound">param</a>
<a id="1496" class="Keyword">open</a> <a id="1501" class="Keyword">import</a> <a id="1508" href="verificationStackScripts.stackVerificationP2PKH.html" class="Module">verificationStackScripts.stackVerificationP2PKH</a> <a id="1556" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#108" class="Bound">param</a>
<a id="1562" class="Keyword">open</a> <a id="1567" class="Keyword">import</a> <a id="1574" href="verificationStackScripts.stackVerificationP2PKHindexed.html" class="Module">verificationStackScripts.stackVerificationP2PKHindexed</a> <a id="1629" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#108" class="Bound">param</a>

<a id="1636" class="Comment">-------------------------------------------------------------</a>
<a id="1698" class="Comment">--   This file explores the symoblic execution of the P2PKH program</a>
<a id="1766" class="Comment">--     in order to determine the case distinction</a>
<a id="1816" class="Comment">--     and extract a program from it</a>
<a id="1853" class="Comment">--</a>
<a id="1856" class="Comment">--   This is done by postulating parameters and applying ⟦ scriptP2PKHᵇ pbkh ⟧ˢ</a>
<a id="1936" class="Comment">--     to parameters</a>
<a id="1957" class="Comment">--------------------------------------------------------------------------------</a>


<a id="2040" class="Keyword">private</a>
  <a id="2050" class="Keyword">postulate</a> <a id="time₁"></a><a id="2060" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2060" class="Postulate">time₁</a> <a id="2066" class="Symbol">:</a> <a id="2068" href="basicBitcoinDataType.html#662" class="Function">Time</a>
  <a id="2075" class="Keyword">postulate</a> <a id="msg₁"></a><a id="2085" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2085" class="Postulate">msg₁</a> <a id="2090" class="Symbol">:</a> <a id="2092" href="basicBitcoinDataType.html#854" class="Datatype">Msg</a>
  <a id="2098" class="Keyword">postulate</a> <a id="stack₁"></a><a id="2108" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2108" class="Postulate">stack₁</a> <a id="2115" class="Symbol">:</a> <a id="2117" href="stack.html#702" class="Function">Stack</a>
  <a id="2125" class="Keyword">postulate</a> <a id="pbkh"></a><a id="2135" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2135" class="Postulate">pbkh</a> <a id="2140" class="Symbol">:</a> <a id="2142" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
  <a id="2146" class="Keyword">postulate</a> <a id="pbk"></a><a id="2156" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2156" class="Postulate">pbk</a> <a id="2160" class="Symbol">:</a> <a id="2162" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
  <a id="2166" class="Keyword">postulate</a> <a id="x₁"></a><a id="2176" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2176" class="Postulate">x₁</a> <a id="2179" class="Symbol">:</a> <a id="2181" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
  <a id="2185" class="Keyword">postulate</a> <a id="sig₁"></a><a id="2195" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2195" class="Postulate">sig₁</a> <a id="2200" class="Symbol">:</a> <a id="2202" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>


<a id="2206" class="Comment">{- We first create a symbolic execution of the scriptP2PKHᵇ pbkh to see what kind
   of case distinction happens -}</a>

<a id="check"></a><a id="2323" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2323" class="Function">check</a> <a id="2329" class="Symbol">=</a> <a id="2331" href="verificationStackScripts.stackVerificationP2PKH.html#6149" class="Function">scriptP2PKHᵇ</a>


<a id="testP2PKHscript"></a><a id="2346" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2346" class="Function">testP2PKHscript</a> <a id="2362" class="Symbol">:</a> <a id="2364" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="2370" href="stack.html#702" class="Function">Stack</a>
<a id="2376" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2346" class="Function">testP2PKHscript</a> <a id="2392" class="Symbol">=</a> <a id="2394" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟦</a> <a id="2396" href="verificationStackScripts.stackVerificationP2PKH.html#6149" class="Function">scriptP2PKHᵇ</a> <a id="2409" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2135" class="Postulate">pbkh</a> <a id="2414" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟧ˢ</a> <a id="2417" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2060" class="Postulate">time₁</a> <a id="2423" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2085" class="Postulate">msg₁</a> <a id="2428" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2108" class="Postulate">stack₁</a>





<a id="2440" class="Comment">{- evaluation of testP2PKHscript returns

executeStackDup stack₁ &gt;&gt;=
(λ stack₂ →
   executeOpHash stack₂ &gt;&gt;=
   (λ stack₃ →
      executeStackEquality (pbkh ∷ stack₃) &gt;&gt;=
      (λ stack₄ →
         executeStackVerify stack₄ &gt;&gt;=
         (λ stack₅ → executeStackCheckSig msg₁ stack₅))))

Improved layout
executeStackDup stack₁ &gt;&gt;= (λ stack₂ →  executeOpHash stack₂ &gt;&gt;=
   (λ stack₃ →  executeStackEquality (pbkh ∷ stack₃) &gt;&gt;=
   (λ stack₄ →  executeStackVerify stack₄ &gt;&gt;=
   (λ stack₅ → executeStackCheckSig msg₁ stack₅))))

-}</a>



<a id="2970" class="Comment">-- We define a term giving the result of the evaluation</a>

<a id="testP2PKHscript2"></a><a id="3027" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3027" class="Function">testP2PKHscript2</a> <a id="3044" class="Symbol">:</a> <a id="3046" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="3052" href="stack.html#702" class="Function">Stack</a>
<a id="3058" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3027" class="Function">testP2PKHscript2</a> <a id="3075" class="Symbol">=</a> <a id="3077" href="semanticBasicOperations.html#1944" class="Function">executeStackDup</a> <a id="3093" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2108" class="Postulate">stack₁</a> <a id="3100" href="Data.Maybe.Base.html#2227" class="Function Operator">&gt;&gt;=</a> <a id="3104" class="Symbol">λ</a> <a id="3106" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3106" class="Bound">stack₂</a> <a id="3113" class="Symbol">→</a>  <a id="3116" href="semanticBasicOperations.html#819" class="Function">executeOpHash</a> <a id="3130" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3106" class="Bound">stack₂</a> <a id="3137" href="Data.Maybe.Base.html#2227" class="Function Operator">&gt;&gt;=</a> <a id="3141" class="Symbol">λ</a> <a id="3143" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3143" class="Bound">stack₃</a> <a id="3150" class="Symbol">→</a>
                   <a id="3171" href="semanticBasicOperations.html#1342" class="Function">executeStackEquality</a> <a id="3192" class="Symbol">(</a><a id="3193" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2135" class="Postulate">pbkh</a> <a id="3198" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3200" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3143" class="Bound">stack₃</a><a id="3206" class="Symbol">)</a> <a id="3208" href="Data.Maybe.Base.html#2227" class="Function Operator">&gt;&gt;=</a>   <a id="3214" class="Symbol">λ</a> <a id="3216" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3216" class="Bound">stack₄</a> <a id="3223" class="Symbol">→</a>  <a id="3226" href="semanticBasicOperations.html#1152" class="Function">executeStackVerify</a> <a id="3245" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3216" class="Bound">stack₄</a> <a id="3252" href="Data.Maybe.Base.html#2227" class="Function Operator">&gt;&gt;=</a> <a id="3256" class="Symbol">λ</a> <a id="3258" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3258" class="Bound">stack₅</a> <a id="3265" class="Symbol">→</a>
                   <a id="3286" href="semanticBasicOperations.html#3132" class="Function">executeStackCheckSig</a> <a id="3307" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2085" class="Postulate">msg₁</a> <a id="3312" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3258" class="Bound">stack₅</a>



<a id="3322" class="Comment">{-
If we execute the first line
(executeStackDup stack₁)

we see it will return
nothing if stack₁ = []
just something if stack₁ is nonempty

So let&#39;s check what happens if stack₁ = []
-}</a>



<a id="testP2PKHscriptEmpty"></a><a id="3512" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3512" class="Function">testP2PKHscriptEmpty</a> <a id="3533" class="Symbol">:</a> <a id="3535" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="3541" href="stack.html#702" class="Function">Stack</a>
<a id="3547" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3512" class="Function">testP2PKHscriptEmpty</a> <a id="3568" class="Symbol">=</a> <a id="3570" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟦</a> <a id="3572" href="verificationStackScripts.stackVerificationP2PKH.html#6149" class="Function">scriptP2PKHᵇ</a> <a id="3585" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2135" class="Postulate">pbkh</a> <a id="3590" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟧ˢ</a> <a id="3593" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2060" class="Postulate">time₁</a> <a id="3599" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2085" class="Postulate">msg₁</a> <a id="3604" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>







<a id="3614" class="Comment">{- if we evaluate testP2PKHscriptEmpty we get:

nothing

So now get the first (trivial) theorem
(without the postulated parameters)
-}</a>



<a id="stackfunP2PKHemptyIsNothing"></a><a id="3752" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3752" class="Function">stackfunP2PKHemptyIsNothing</a> <a id="3780" class="Symbol">:</a> <a id="3782" class="Symbol">(</a><a id="3783" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3783" class="Bound">pubKeyHash</a> <a id="3794" class="Symbol">:</a> <a id="3796" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="3797" class="Symbol">)(</a><a id="3799" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3799" class="Bound">time₁</a> <a id="3805" class="Symbol">:</a> <a id="3807" href="basicBitcoinDataType.html#662" class="Function">Time</a><a id="3811" class="Symbol">)(</a><a id="3813" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3813" class="Bound">msg₁</a> <a id="3818" class="Symbol">:</a> <a id="3820" href="basicBitcoinDataType.html#854" class="Datatype">Msg</a><a id="3823" class="Symbol">)</a>
                              <a id="3855" class="Symbol">→</a> <a id="3857" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟦</a> <a id="3859" href="verificationStackScripts.stackVerificationP2PKH.html#6149" class="Function">scriptP2PKHᵇ</a> <a id="3872" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3783" class="Bound">pubKeyHash</a> <a id="3883" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟧ˢ</a> <a id="3886" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3799" class="Bound">time₁</a> <a id="3892" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3813" class="Bound">msg₁</a> <a id="3897" class="InductiveConstructor">[]</a> <a id="3900" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3902" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>
<a id="3910" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3752" class="Function">stackfunP2PKHemptyIsNothing</a> <a id="3938" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3938" class="Bound">pubKeyHash</a> <a id="3949" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3949" class="Bound">time₁</a> <a id="3955" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#3955" class="Bound">msg₁</a> <a id="3960" class="Symbol">=</a> <a id="3962" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>




<a id="3971" class="Comment">{- Now we look at what happens if the stack is non empty -}</a>



<a id="teststackfunP2PKHNonEmptyStack"></a><a id="4034" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4034" class="Function">teststackfunP2PKHNonEmptyStack</a> <a id="4065" class="Symbol">:</a>  <a id="4068" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="4074" href="stack.html#702" class="Function">Stack</a>
<a id="4080" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4034" class="Function">teststackfunP2PKHNonEmptyStack</a> <a id="4111" class="Symbol">=</a>  <a id="4114" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟦</a> <a id="4116" href="verificationStackScripts.stackVerificationP2PKH.html#6149" class="Function">scriptP2PKHᵇ</a> <a id="4129" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2135" class="Postulate">pbkh</a> <a id="4134" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟧ˢ</a> <a id="4137" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2060" class="Postulate">time₁</a> <a id="4143" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2085" class="Postulate">msg₁</a> <a id="4148" class="Symbol">(</a><a id="4149" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2156" class="Postulate">pbk</a> <a id="4153" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="4155" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2108" class="Postulate">stack₁</a><a id="4161" class="Symbol">)</a>


<a id="4165" class="Comment">{- If we compute teststackfunP2PKHNonEmptyStack  we get

executeStackVerify (compareNaturals pbkh (param .hash pbk) ∷ pbk ∷ stack₁)
&gt;&gt;= (λ stack₂ → executeStackCheckSig msg₁ stack₂)


We see that

(λ stack₂ → executeStackCheckSig msg₁ stack₂) = executeStackCheckSig msg₁

and can therefore use

executeStackVerify (compareNaturals pbkh (param .hash pbk) ∷ pbk ∷ stack₁)
&gt;&gt;= executeStackCheckSig msg₁ -}</a>




<a id="stackfunP2PKHNonEmptyStack"></a><a id="4572" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4572" class="Function">stackfunP2PKHNonEmptyStack</a> <a id="4599" class="Symbol">:</a> <a id="4601" class="Symbol">(</a><a id="4602" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4602" class="Bound">pubKeyHash</a> <a id="4613" class="Symbol">:</a> <a id="4615" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="4616" class="Symbol">)(</a><a id="4618" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4618" class="Bound">msg₁</a> <a id="4623" class="Symbol">:</a> <a id="4625" href="basicBitcoinDataType.html#854" class="Datatype">Msg</a><a id="4628" class="Symbol">)(</a><a id="4630" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4630" class="Bound">pbk</a> <a id="4634" class="Symbol">:</a> <a id="4636" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="4637" class="Symbol">)(</a><a id="4639" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4639" class="Bound">stack₂</a> <a id="4646" class="Symbol">:</a> <a id="4648" href="stack.html#702" class="Function">Stack</a><a id="4653" class="Symbol">)</a> <a id="4655" class="Symbol">→</a> <a id="4657" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="4663" href="stack.html#702" class="Function">Stack</a>
<a id="4669" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4572" class="Function">stackfunP2PKHNonEmptyStack</a> <a id="4696" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4696" class="Bound">pubKeyHash</a> <a id="4707" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4707" class="Bound">msg₁</a> <a id="4712" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4712" class="Bound">pbk</a> <a id="4716" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4716" class="Bound">stack₂</a>
              <a id="4737" class="Symbol">=</a> <a id="4739" href="semanticBasicOperations.html#1152" class="Function">executeStackVerify</a> <a id="4758" class="Symbol">(</a><a id="4759" href="libraries.natLib.html#1060" class="Function">compareNaturals</a> <a id="4775" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4696" class="Bound">pubKeyHash</a> <a id="4786" class="Symbol">(</a><a id="4787" href="semanticBasicOperations.html#778" class="Function">hashFun</a> <a id="4795" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4712" class="Bound">pbk</a><a id="4798" class="Symbol">)</a> <a id="4800" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="4802" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4712" class="Bound">pbk</a> <a id="4806" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="4808" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4716" class="Bound">stack₂</a><a id="4814" class="Symbol">)</a>
                 <a id="4833" href="Data.Maybe.Base.html#2227" class="Function Operator">&gt;&gt;=</a> <a id="4837" href="semanticBasicOperations.html#3132" class="Function">executeStackCheckSig</a> <a id="4858" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4707" class="Bound">msg₁</a>




<a id="4867" class="Comment">-- and check that this is correct </a>

<a id="stackfunP2PKHemptyNonEmptyStackCorrect"></a><a id="4903" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4903" class="Function">stackfunP2PKHemptyNonEmptyStackCorrect</a> <a id="4942" class="Symbol">:</a> <a id="4944" class="Symbol">(</a><a id="4945" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4945" class="Bound">pubKeyHash</a> <a id="4956" class="Symbol">:</a> <a id="4958" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="4959" class="Symbol">)(</a><a id="4961" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4961" class="Bound">time₁</a> <a id="4967" class="Symbol">:</a> <a id="4969" href="basicBitcoinDataType.html#662" class="Function">Time</a><a id="4973" class="Symbol">)(</a><a id="4975" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4975" class="Bound">msg₁</a> <a id="4980" class="Symbol">:</a> <a id="4982" href="basicBitcoinDataType.html#854" class="Datatype">Msg</a><a id="4985" class="Symbol">)(</a><a id="4987" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4987" class="Bound">pbk</a> <a id="4991" class="Symbol">:</a> <a id="4993" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="4994" class="Symbol">)(</a><a id="4996" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4996" class="Bound">stack₂</a> <a id="5003" class="Symbol">:</a> <a id="5005" href="stack.html#702" class="Function">Stack</a><a id="5010" class="Symbol">)</a>
        <a id="5020" class="Symbol">→</a> <a id="5022" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟦</a> <a id="5024" href="verificationStackScripts.stackVerificationP2PKH.html#6149" class="Function">scriptP2PKHᵇ</a> <a id="5037" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4945" class="Bound">pubKeyHash</a>  <a id="5049" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟧ˢ</a> <a id="5052" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4961" class="Bound">time₁</a> <a id="5058" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4975" class="Bound">msg₁</a> <a id="5063" class="Symbol">(</a><a id="5064" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4987" class="Bound">pbk</a> <a id="5068" class="InductiveConstructor Operator">∷</a> <a id="5070" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4996" class="Bound">stack₂</a><a id="5076" class="Symbol">)</a> <a id="5078" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="5080" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4572" class="Function">stackfunP2PKHNonEmptyStack</a> <a id="5107" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4945" class="Bound">pubKeyHash</a> <a id="5118" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4975" class="Bound">msg₁</a>  <a id="5124" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4987" class="Bound">pbk</a> <a id="5128" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4996" class="Bound">stack₂</a>
<a id="5135" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#4903" class="Function">stackfunP2PKHemptyNonEmptyStackCorrect</a> <a id="5174" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5174" class="Bound">pubKeyHash</a> <a id="5185" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5185" class="Bound">time₁</a> <a id="5191" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5191" class="Bound">msg₁</a> <a id="5196" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5196" class="Bound">pbk</a> <a id="5200" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5200" class="Bound">stack₂</a> <a id="5207" class="Symbol">=</a> <a id="5209" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>



<a id="5217" class="Comment">{- We see now the case distinction depends on
   compres := compareNaturals pbkh (hashFun pbk)

since

executeStackVerify    (compres ∷  pbk ∷ stack₁)

will depend on whether compres is 0 or  suc x&#39;

so we abstract from

compres = compareNaturals pubKeyHash (hashFun pbk)

-}</a>

<a id="5494" class="Comment">-- This function will be repeated in stackVerificationP2PKHextractedProgram.agda</a>
<a id="5575" class="Comment">-- and therefore is kept private in this section in order to avoid a conflict</a>
<a id="5653" class="Keyword">private</a>

  <a id="p2PKHNonEmptyStackAbstr"></a><a id="5664" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5664" class="Function">p2PKHNonEmptyStackAbstr</a> <a id="5688" class="Symbol">:</a> <a id="5690" class="Symbol">(</a><a id="5691" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5691" class="Bound">msg₁</a> <a id="5696" class="Symbol">:</a> <a id="5698" href="basicBitcoinDataType.html#854" class="Datatype">Msg</a><a id="5701" class="Symbol">)(</a><a id="5703" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5703" class="Bound">pbk</a> <a id="5707" class="Symbol">:</a> <a id="5709" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="5710" class="Symbol">)(</a><a id="5712" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5712" class="Bound">stack₂</a> <a id="5719" class="Symbol">:</a> <a id="5721" href="stack.html#702" class="Function">Stack</a><a id="5726" class="Symbol">)(</a><a id="5728" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5728" class="Bound">cmp</a> <a id="5732" class="Symbol">:</a> <a id="5734" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="5735" class="Symbol">)</a>
                                <a id="5769" class="Symbol">→</a> <a id="5771" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="5777" href="stack.html#702" class="Function">Stack</a>
  <a id="5785" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5664" class="Function">p2PKHNonEmptyStackAbstr</a> <a id="5809" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5809" class="Bound">msg₁</a> <a id="5814" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5814" class="Bound">pbk</a> <a id="5818" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5818" class="Bound">stack₂</a> <a id="5825" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5825" class="Bound">cmp</a>
       <a id="5836" class="Symbol">=</a>  <a id="5839" href="semanticBasicOperations.html#1152" class="Function">executeStackVerify</a> <a id="5858" class="Symbol">(</a><a id="5859" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5825" class="Bound">cmp</a> <a id="5863" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a>  <a id="5866" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5814" class="Bound">pbk</a> <a id="5870" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="5872" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5818" class="Bound">stack₂</a><a id="5878" class="Symbol">)</a> <a id="5880" href="Data.Maybe.Base.html#2227" class="Function Operator">&gt;&gt;=</a> <a id="5884" href="semanticBasicOperations.html#3132" class="Function">executeStackCheckSig</a> <a id="5905" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5809" class="Bound">msg₁</a>



<a id="5913" class="Comment">--and we show that this is the right function</a>

<a id="5960" class="Comment">-- This function will be repeated in stackVerificationP2PKHextractedProgram.agda</a>
<a id="6041" class="Comment">-- and therefore is kept private in this section in order to avoid a conflict</a>
<a id="6119" class="Keyword">private</a>
  <a id="stackfunP2PKHNonEmptyStackAbstractedCor"></a><a id="6129" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6129" class="Function">stackfunP2PKHNonEmptyStackAbstractedCor</a> <a id="6169" class="Symbol">:</a>  <a id="6172" class="Symbol">(</a><a id="6173" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6173" class="Bound">pubKeyHash</a> <a id="6184" class="Symbol">:</a> <a id="6186" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="6187" class="Symbol">)(</a><a id="6189" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6189" class="Bound">time₁</a> <a id="6195" class="Symbol">:</a> <a id="6197" href="basicBitcoinDataType.html#662" class="Function">Time</a><a id="6201" class="Symbol">)(</a><a id="6203" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6203" class="Bound">msg₁</a> <a id="6208" class="Symbol">:</a> <a id="6210" href="basicBitcoinDataType.html#854" class="Datatype">Msg</a><a id="6213" class="Symbol">)(</a><a id="6215" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6215" class="Bound">pbk</a> <a id="6219" class="Symbol">:</a> <a id="6221" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="6222" class="Symbol">)(</a><a id="6224" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6224" class="Bound">stack₂</a> <a id="6231" class="Symbol">:</a> <a id="6233" href="stack.html#702" class="Function">Stack</a><a id="6238" class="Symbol">)</a>
                  <a id="6258" class="Symbol">→</a> <a id="6260" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟦</a> <a id="6262" href="verificationStackScripts.stackVerificationP2PKH.html#6149" class="Function">scriptP2PKHᵇ</a> <a id="6275" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6173" class="Bound">pubKeyHash</a> <a id="6286" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟧ˢ</a> <a id="6289" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6189" class="Bound">time₁</a> <a id="6295" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6203" class="Bound">msg₁</a> <a id="6300" class="Symbol">(</a><a id="6301" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6215" class="Bound">pbk</a> <a id="6305" class="InductiveConstructor Operator">∷</a> <a id="6307" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6224" class="Bound">stack₂</a><a id="6313" class="Symbol">)</a>
                     <a id="6336" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6338" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5664" class="Function">p2PKHNonEmptyStackAbstr</a>  <a id="6363" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6203" class="Bound">msg₁</a> <a id="6368" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6215" class="Bound">pbk</a> <a id="6372" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6224" class="Bound">stack₂</a>
                             <a id="6408" class="Symbol">(</a><a id="6409" href="libraries.natLib.html#1060" class="Function">compareNaturals</a> <a id="6425" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6173" class="Bound">pubKeyHash</a> <a id="6436" class="Symbol">(</a><a id="6437" href="semanticBasicOperations.html#778" class="Function">hashFun</a> <a id="6445" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6215" class="Bound">pbk</a><a id="6448" class="Symbol">))</a>
  <a id="6453" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6129" class="Function">stackfunP2PKHNonEmptyStackAbstractedCor</a> <a id="6493" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6493" class="Bound">pubKeyHash</a> <a id="6504" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6504" class="Bound">time₁</a> <a id="6510" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6510" class="Bound">msg₁</a> <a id="6515" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6515" class="Bound">pbk</a> <a id="6519" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6519" class="Bound">stack₂</a> <a id="6526" class="Symbol">=</a> <a id="6528" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>


<a id="6535" class="Comment">{- Now we investigate  p2PKHNonEmptyStackAbstr
When looking at it we see that

 p2PKHNonEmptyStackAbstr msg₁ pbk stack₂ cmp

will evaluate to
executeStackVerify (cmp ∷  pbk ∷ stack₂)
which will in turn make a case disctintion on whether cmp is 0 or  not zero

(that corresponds to what the original function does because it makes this comparison
   compareNaturals pubKeyHash (hashFun pbk)
  which checks  whether the pbk provided  by the user hashes to the pubKeyHash of the locking script
    if it  is 0 it should fail, and if it is 1 it should succeed.

So lets make the test
-}</a>

<a id="testStackfunP2PKHNonEmptyStackAbstractedCompre0"></a><a id="7119" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#7119" class="Function">testStackfunP2PKHNonEmptyStackAbstractedCompre0</a> <a id="7167" class="Symbol">:</a> <a id="7169" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="7175" href="stack.html#702" class="Function">Stack</a>
<a id="7181" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#7119" class="Function">testStackfunP2PKHNonEmptyStackAbstractedCompre0</a> <a id="7229" class="Symbol">=</a> <a id="7231" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5664" class="Function">p2PKHNonEmptyStackAbstr</a> <a id="7255" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2085" class="Postulate">msg₁</a> <a id="7260" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2156" class="Postulate">pbk</a> <a id="7264" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2108" class="Postulate">stack₁</a> <a id="7271" class="Number">0</a>

<a id="7274" class="Comment">{- if we evaluate it we get

nothing


We  show now this is always the case

-}</a>

<a id="7355" class="Comment">-- This function will be repeated in stackVerificationP2PKHextractedProgram.agda</a>
<a id="7436" class="Comment">-- and therefore is kept private in this section in order to avoid a conflict</a>
<a id="7514" class="Keyword">private</a>
  <a id="stackfunP2PKHNonEmptyStackAbstractedCorCompr0IsNothing"></a><a id="7524" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#7524" class="Function">stackfunP2PKHNonEmptyStackAbstractedCorCompr0IsNothing</a> <a id="7579" class="Symbol">:</a> <a id="7581" class="Symbol">(</a><a id="7582" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#7582" class="Bound">msg₁</a> <a id="7587" class="Symbol">:</a> <a id="7589" href="basicBitcoinDataType.html#854" class="Datatype">Msg</a><a id="7592" class="Symbol">)(</a><a id="7594" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#7594" class="Bound">pbk</a> <a id="7598" class="Symbol">:</a> <a id="7600" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="7601" class="Symbol">)(</a><a id="7603" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#7603" class="Bound">stack₂</a> <a id="7610" class="Symbol">:</a> <a id="7612" href="stack.html#702" class="Function">Stack</a><a id="7617" class="Symbol">)</a>
        <a id="7627" class="Symbol">→</a>  <a id="7630" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5664" class="Function">p2PKHNonEmptyStackAbstr</a> <a id="7654" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#7582" class="Bound">msg₁</a> <a id="7659" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#7594" class="Bound">pbk</a> <a id="7663" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#7603" class="Bound">stack₂</a> <a id="7670" class="Number">0</a> <a id="7672" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7674" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>
  <a id="7684" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#7524" class="Function">stackfunP2PKHNonEmptyStackAbstractedCorCompr0IsNothing</a> <a id="7739" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#7739" class="Bound">msg₁</a> <a id="7744" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#7744" class="Bound">pbk</a> <a id="7748" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#7748" class="Bound">stack₂</a> <a id="7755" class="Symbol">=</a> <a id="7757" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>


<a id="7764" class="Comment">{- Now we look at what happens  if the value is non zero -}</a>


<a id="testStackfunP2PKHNonEmptyStackAbstractedCompreSucCase"></a><a id="7826" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#7826" class="Function">testStackfunP2PKHNonEmptyStackAbstractedCompreSucCase</a> <a id="7880" class="Symbol">:</a> <a id="7882" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="7888" href="stack.html#702" class="Function">Stack</a>
<a id="7894" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#7826" class="Function">testStackfunP2PKHNonEmptyStackAbstractedCompreSucCase</a> <a id="7948" class="Symbol">=</a> <a id="7950" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5664" class="Function">p2PKHNonEmptyStackAbstr</a> <a id="7974" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2085" class="Postulate">msg₁</a> <a id="7979" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2156" class="Postulate">pbk</a> <a id="7983" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2108" class="Postulate">stack₁</a> <a id="7990" class="Symbol">(</a><a id="7991" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="7995" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2176" class="Postulate">x₁</a><a id="7997" class="Symbol">)</a>

<a id="8000" class="Comment">{- if we evalute
     testStackfunP2PKHNonEmptyStackAbstractedCompreSucCase
    we get

executeStackCheckSig msg₁ (pbk ∷ stack₁)


This corresponds to the situation where
the original stack₁ was non empty, and the comparision of the pbk with the pbkhash
got a result &gt; 0



If we look at
executeStackCheckSig

we see that it gives nothing when the stack has height &lt; 2
and otherwise does something,

so we can  make a case distinction on whether in

p2PKHNonEmptyStackAbstr msg₁ pbk stack₁ x

stack₁ is [] or nonempty

So lets look at the easy case []

    -}</a>



<a id="testStackfunP2PKHNonEmptyStackAbstractedCompreSucEmpty"></a><a id="8563" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#8563" class="Function">testStackfunP2PKHNonEmptyStackAbstractedCompreSucEmpty</a> <a id="8618" class="Symbol">:</a> <a id="8620" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="8626" href="stack.html#702" class="Function">Stack</a>
<a id="8632" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#8563" class="Function">testStackfunP2PKHNonEmptyStackAbstractedCompreSucEmpty</a> <a id="8687" class="Symbol">=</a>
                           <a id="8716" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5664" class="Function">p2PKHNonEmptyStackAbstr</a> <a id="8740" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2085" class="Postulate">msg₁</a> <a id="8745" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2156" class="Postulate">pbk</a> <a id="8749" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="8752" class="Symbol">(</a><a id="8753" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="8757" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2176" class="Postulate">x₁</a><a id="8759" class="Symbol">)</a>


<a id="8763" class="Comment">{- if we evaluate it we get  result

nothing

we check that this always holds
-}</a>


<a id="stackfunP2PKHNonEmptyStackAbstractedCorComprSucStackEmpty"></a><a id="8846" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#8846" class="Function">stackfunP2PKHNonEmptyStackAbstractedCorComprSucStackEmpty</a> <a id="8904" class="Symbol">:</a> <a id="8906" class="Symbol">(</a><a id="8907" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#8907" class="Bound">msg₁</a> <a id="8912" class="Symbol">:</a> <a id="8914" href="basicBitcoinDataType.html#854" class="Datatype">Msg</a><a id="8917" class="Symbol">)(</a><a id="8919" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#8919" class="Bound">pbk</a> <a id="8923" class="Symbol">:</a> <a id="8925" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="8926" class="Symbol">)(</a><a id="8928" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#8928" class="Bound">x</a> <a id="8930" class="Symbol">:</a> <a id="8932" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="8933" class="Symbol">)</a>
             <a id="8948" class="Symbol">→</a> <a id="8950" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5664" class="Function">p2PKHNonEmptyStackAbstr</a> <a id="8974" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#8907" class="Bound">msg₁</a> <a id="8979" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#8919" class="Bound">pbk</a> <a id="8983" class="InductiveConstructor">[]</a> <a id="8986" class="Symbol">(</a><a id="8987" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="8991" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#8928" class="Bound">x</a><a id="8992" class="Symbol">)</a> <a id="8994" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="8996" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>
<a id="9004" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#8846" class="Function">stackfunP2PKHNonEmptyStackAbstractedCorComprSucStackEmpty</a> <a id="9062" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9062" class="Bound">msg₁</a> <a id="9067" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9067" class="Bound">pbk</a> <a id="9071" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9071" class="Bound">x</a>  <a id="9074" class="Symbol">=</a> <a id="9076" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="9082" class="Comment">{-  Intermezzo: we can see that the fanction gives always nothing if the stack is empty
   independent of the result

But this result is not really needed    -}</a>

<a id="9244" class="Comment">-- This function will be repeated in stackVerificationP2PKHextractedProgram.agda</a>
<a id="9325" class="Comment">-- and therefore is kept private in this section in order to avoid a conflict</a>
<a id="9403" class="Keyword">private</a>
  <a id="stackfunP2PKHNonEmptyStackAbstractedCorEmptysNothing"></a><a id="9413" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9413" class="Function">stackfunP2PKHNonEmptyStackAbstractedCorEmptysNothing</a> <a id="9466" class="Symbol">:</a> <a id="9468" class="Symbol">(</a><a id="9469" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9469" class="Bound">msg₁</a> <a id="9474" class="Symbol">:</a> <a id="9476" href="basicBitcoinDataType.html#854" class="Datatype">Msg</a><a id="9479" class="Symbol">)(</a><a id="9481" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9481" class="Bound">pbk</a> <a id="9485" class="Symbol">:</a> <a id="9487" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="9488" class="Symbol">)(</a><a id="9490" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9490" class="Bound">x</a> <a id="9492" class="Symbol">:</a> <a id="9494" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="9495" class="Symbol">)</a>
        <a id="9505" class="Symbol">→</a>  <a id="9508" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5664" class="Function">p2PKHNonEmptyStackAbstr</a> <a id="9532" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9469" class="Bound">msg₁</a> <a id="9537" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9481" class="Bound">pbk</a> <a id="9541" class="InductiveConstructor">[]</a> <a id="9544" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9490" class="Bound">x</a> <a id="9546" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="9548" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>

  <a id="9559" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9413" class="Function">stackfunP2PKHNonEmptyStackAbstractedCorEmptysNothing</a> <a id="9612" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9612" class="Bound">msg₁</a> <a id="9617" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9617" class="Bound">pbk₁</a> <a id="9622" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a> <a id="9627" class="Symbol">=</a> <a id="9629" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
  <a id="9636" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9413" class="Function">stackfunP2PKHNonEmptyStackAbstractedCorEmptysNothing</a> <a id="9689" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9689" class="Bound">msg₁</a> <a id="9694" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9694" class="Bound">pbk₁</a> <a id="9699" class="Symbol">(</a><a id="9700" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="9704" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9704" class="Bound">x</a><a id="9705" class="Symbol">)</a> <a id="9707" class="Symbol">=</a> <a id="9709" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

<a id="9715" class="Comment">-- Now we look at what happens if we have non empty stack₁ and comparision &gt; 0</a>


<a id="9796" class="Comment">{- if we evaluate it we get

just (boolToNat (isSigned  msg₁ sig₁ pbk) ∷ stack₁)



and we show that this is the case

-}</a>


<a id="testStackfunP2PKHNonEmptyStackAbstractedCompreSucNonEmpty"></a><a id="9920" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9920" class="Function">testStackfunP2PKHNonEmptyStackAbstractedCompreSucNonEmpty</a> <a id="9978" class="Symbol">:</a> <a id="9980" href="Agda.Builtin.Maybe.html#136" class="Datatype">Maybe</a> <a id="9986" href="stack.html#702" class="Function">Stack</a>
<a id="9992" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9920" class="Function">testStackfunP2PKHNonEmptyStackAbstractedCompreSucNonEmpty</a> <a id="10050" class="Symbol">=</a> <a id="10052" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5664" class="Function">p2PKHNonEmptyStackAbstr</a> <a id="10076" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2085" class="Postulate">msg₁</a> <a id="10081" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2156" class="Postulate">pbk</a> <a id="10085" class="Symbol">(</a><a id="10086" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2195" class="Postulate">sig₁</a>  <a id="10092" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="10094" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2108" class="Postulate">stack₁</a><a id="10100" class="Symbol">)</a> <a id="10102" class="Symbol">(</a><a id="10103" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="10107" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#2176" class="Postulate">x₁</a><a id="10109" class="Symbol">)</a>



<a id="stackfunP2PKHNonEmptyStackAbstractedCorComprSucStackNonEmptyCor"></a><a id="10114" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10114" class="Function">stackfunP2PKHNonEmptyStackAbstractedCorComprSucStackNonEmptyCor</a> <a id="10178" class="Symbol">:</a>
       <a id="10187" class="Symbol">(</a><a id="10188" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10188" class="Bound">msg₁</a> <a id="10193" class="Symbol">:</a> <a id="10195" href="basicBitcoinDataType.html#854" class="Datatype">Msg</a><a id="10198" class="Symbol">)(</a><a id="10200" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10200" class="Bound">pbk</a> <a id="10204" class="Symbol">:</a> <a id="10206" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="10207" class="Symbol">)(</a><a id="10209" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10209" class="Bound">x</a> <a id="10211" class="Symbol">:</a> <a id="10213" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="10214" class="Symbol">)(</a><a id="10216" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10216" class="Bound">sig₁</a> <a id="10221" class="Symbol">:</a> <a id="10223" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="10224" class="Symbol">)(</a><a id="10226" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10226" class="Bound">stack₂</a> <a id="10233" class="Symbol">:</a> <a id="10235" href="stack.html#702" class="Function">Stack</a><a id="10240" class="Symbol">)</a>
       <a id="10249" class="Symbol">→</a> <a id="10251" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5664" class="Function">p2PKHNonEmptyStackAbstr</a> <a id="10275" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10188" class="Bound">msg₁</a> <a id="10280" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10200" class="Bound">pbk</a> <a id="10284" class="Symbol">(</a><a id="10285" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10216" class="Bound">sig₁</a>  <a id="10291" class="InductiveConstructor Operator">∷</a> <a id="10293" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10226" class="Bound">stack₂</a><a id="10299" class="Symbol">)</a> <a id="10301" class="Symbol">(</a><a id="10302" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="10306" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10209" class="Bound">x</a><a id="10307" class="Symbol">)</a>
          <a id="10319" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a>  <a id="10322" href="Agda.Builtin.Maybe.html#174" class="InductiveConstructor">just</a> <a id="10327" class="Symbol">(</a><a id="10328" href="libraries.natLib.html#890" class="Function">boolToNat</a> <a id="10338" class="Symbol">(</a><a id="10339" href="semanticBasicOperations.html#2918" class="Function">isSigned</a>  <a id="10349" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10188" class="Bound">msg₁</a> <a id="10354" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10216" class="Bound">sig₁</a> <a id="10359" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10200" class="Bound">pbk</a><a id="10362" class="Symbol">)</a> <a id="10364" class="InductiveConstructor Operator">∷</a> <a id="10366" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10226" class="Bound">stack₂</a><a id="10372" class="Symbol">)</a>
<a id="10374" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10114" class="Function">stackfunP2PKHNonEmptyStackAbstractedCorComprSucStackNonEmptyCor</a> <a id="10438" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10438" class="Bound">msg₂</a> <a id="10443" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10443" class="Bound">pbk₁</a> <a id="10448" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10448" class="Bound">sig₁</a> <a id="10453" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10453" class="Bound">x</a> <a id="10455" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10455" class="Bound">stack₃</a> <a id="10462" class="Symbol">=</a> <a id="10464" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>




<a id="10473" class="Comment">-- this prove is not needed but an interesting observation </a>

<a id="stackfunP2PKHemptySingleStackIsNothing"></a><a id="10534" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10534" class="Function">stackfunP2PKHemptySingleStackIsNothing</a> <a id="10573" class="Symbol">:</a> <a id="10575" class="Symbol">(</a><a id="10576" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10576" class="Bound">pubKeyHash</a> <a id="10587" class="Symbol">:</a> <a id="10589" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="10590" class="Symbol">)(</a><a id="10592" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10592" class="Bound">time₁</a> <a id="10598" class="Symbol">:</a> <a id="10600" href="basicBitcoinDataType.html#662" class="Function">Time</a><a id="10604" class="Symbol">)(</a><a id="10606" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10606" class="Bound">msg₁</a> <a id="10611" class="Symbol">:</a> <a id="10613" href="basicBitcoinDataType.html#854" class="Datatype">Msg</a><a id="10616" class="Symbol">)(</a><a id="10618" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10618" class="Bound">pbk</a> <a id="10622" class="Symbol">:</a> <a id="10624" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="10625" class="Symbol">)</a>
        <a id="10635" class="Symbol">→</a> <a id="10637" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟦</a> <a id="10639" href="verificationStackScripts.stackVerificationP2PKH.html#6149" class="Function">scriptP2PKHᵇ</a> <a id="10652" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10576" class="Bound">pubKeyHash</a> <a id="10663" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟧ˢ</a> <a id="10666" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10592" class="Bound">time₁</a> <a id="10672" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10606" class="Bound">msg₁</a> <a id="10677" class="Symbol">(</a><a id="10678" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10618" class="Bound">pbk</a> <a id="10682" class="InductiveConstructor Operator">∷</a> <a id="10684" class="InductiveConstructor">[]</a><a id="10686" class="Symbol">)</a> <a id="10688" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="10690" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>
<a id="10698" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10534" class="Function">stackfunP2PKHemptySingleStackIsNothing</a>  <a id="10738" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10738" class="Bound">pubKeyHash</a> <a id="10749" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10749" class="Bound">time₁</a> <a id="10755" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10755" class="Bound">msg₁</a> <a id="10760" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10760" class="Bound">pbk</a>
  <a id="10766" class="Symbol">=</a>  <a id="10769" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟦</a> <a id="10771" href="verificationStackScripts.stackVerificationP2PKH.html#6149" class="Function">scriptP2PKHᵇ</a> <a id="10784" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10738" class="Bound">pubKeyHash</a> <a id="10795" href="verificationStackScripts.stackSemanticsInstructionsBasic.html#1850" class="Function Operator">⟧ˢ</a> <a id="10798" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10749" class="Bound">time₁</a> <a id="10804" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10755" class="Bound">msg₁</a> <a id="10809" class="Symbol">(</a><a id="10810" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10760" class="Bound">pbk</a> <a id="10814" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="10816" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="10818" class="Symbol">)</a>
               <a id="10835" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="10838" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#6129" class="Function">stackfunP2PKHNonEmptyStackAbstractedCor</a> <a id="10878" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10738" class="Bound">pubKeyHash</a> <a id="10889" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10749" class="Bound">time₁</a> <a id="10895" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10755" class="Bound">msg₁</a> <a id="10900" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10760" class="Bound">pbk</a> <a id="10904" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>   <a id="10909" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
     <a id="10916" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#5664" class="Function">p2PKHNonEmptyStackAbstr</a>  <a id="10941" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10755" class="Bound">msg₁</a> <a id="10946" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10760" class="Bound">pbk</a> <a id="10950" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="10953" class="Symbol">(</a><a id="10954" href="libraries.natLib.html#1060" class="Function">compareNaturals</a> <a id="10970" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10738" class="Bound">pubKeyHash</a> <a id="10981" class="Symbol">(</a><a id="10982" href="semanticBasicOperations.html#778" class="Function">hashFun</a> <a id="10990" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10760" class="Bound">pbk</a><a id="10993" class="Symbol">))</a>
               <a id="11011" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">≡⟨</a> <a id="11014" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#9413" class="Function">stackfunP2PKHNonEmptyStackAbstractedCorEmptysNothing</a> <a id="11067" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10755" class="Bound">msg₁</a> <a id="11072" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10760" class="Bound">pbk</a> <a id="11076" class="Symbol">(</a><a id="11077" href="libraries.natLib.html#1060" class="Function">compareNaturals</a> <a id="11093" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10738" class="Bound">pubKeyHash</a> <a id="11104" class="Symbol">(</a><a id="11105" href="semanticBasicOperations.html#778" class="Function">hashFun</a> <a id="11113" href="verificationStackScripts.stackVerificationP2PKHsymbolicExecution.html#10760" class="Bound">pbk</a><a id="11116" class="Symbol">))</a>   <a id="11121" href="Relation.Binary.PropositionalEquality.Core.html#2923" class="Function">⟩</a>
     <a id="11128" href="Agda.Builtin.Maybe.html#195" class="InductiveConstructor">nothing</a>
     <a id="11141" href="Relation.Binary.PropositionalEquality.Core.html#3105" class="Function Operator">∎</a>
</pre></body></html>