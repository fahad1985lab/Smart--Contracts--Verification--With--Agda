<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>hoareTripleStack</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="basicBitcoinDataType.html" class="Module">basicBitcoinDataType</a>

<a id="35" class="Keyword">module</a> <a id="42" href="hoareTripleStack.html" class="Module">hoareTripleStack</a> <a id="59" class="Symbol">(</a><a id="60" href="hoareTripleStack.html#60" class="Bound">param</a> <a id="66" class="Symbol">:</a> <a id="68" href="basicBitcoinDataType.html#1157" class="Record">GlobalParameters</a><a id="84" class="Symbol">)</a> <a id="86" class="Keyword">where</a>

<a id="93" class="Keyword">open</a> <a id="98" class="Keyword">import</a> <a id="105" href="Data.Nat.html" class="Module">Data.Nat</a>  <a id="115" class="Keyword">renaming</a> <a id="124" class="Symbol">(</a><a id="125" href="Data.Nat.Base.html#1691" class="Datatype Operator">_≤_</a> <a id="129" class="Symbol">to</a> <a id="132" class="Datatype Operator">_≤&#39;_</a> <a id="137" class="Symbol">;</a> <a id="139" href="Data.Nat.Base.html#1801" class="Function Operator">_&lt;_</a> <a id="143" class="Symbol">to</a> <a id="146" class="Function Operator">_&lt;&#39;_</a><a id="150" class="Symbol">)</a>
<a id="152" class="Keyword">open</a> <a id="157" class="Keyword">import</a> <a id="164" href="Data.List.html" class="Module">Data.List</a> <a id="174" class="Keyword">hiding</a> <a id="181" class="Symbol">(</a><a id="182" href="Data.List.Base.html#1954" class="Function Operator">_++_</a><a id="186" class="Symbol">)</a>
<a id="188" class="Keyword">open</a> <a id="193" class="Keyword">import</a> <a id="200" href="Data.Sum.html" class="Module">Data.Sum</a>
<a id="209" class="Keyword">open</a> <a id="214" class="Keyword">import</a> <a id="221" href="Data.Maybe.html" class="Module">Data.Maybe</a>
<a id="232" class="Keyword">open</a> <a id="237" class="Keyword">import</a> <a id="244" href="Data.Unit.html" class="Module">Data.Unit</a>  
<a id="256" class="Keyword">open</a> <a id="261" class="Keyword">import</a> <a id="268" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="279" class="Keyword">open</a> <a id="284" class="Keyword">import</a> <a id="291" href="Data.Bool.html" class="Module">Data.Bool</a>  <a id="302" class="Keyword">hiding</a> <a id="309" class="Symbol">(</a><a id="310" href="Data.Bool.Base.html#681" class="Datatype Operator">_≤_</a> <a id="314" class="Symbol">;</a> <a id="316" href="Data.Bool.Base.html#1505" class="Function Operator">if_then_else_</a> <a id="330" class="Symbol">)</a> <a id="332" class="Keyword">renaming</a> <a id="341" class="Symbol">(</a><a id="342" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> <a id="346" class="Symbol">to</a> <a id="349" class="Function Operator">_∧b_</a> <a id="354" class="Symbol">;</a> <a id="356" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a> <a id="360" class="Symbol">to</a> <a id="363" class="Function Operator">_∨b_</a> <a id="368" class="Symbol">;</a> <a id="370" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="372" class="Symbol">to</a> <a id="375" class="Function">True</a><a id="379" class="Symbol">)</a>
<a id="381" class="Keyword">open</a> <a id="386" class="Keyword">import</a> <a id="393" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="408" class="Keyword">hiding</a> <a id="415" class="Symbol">(</a><a id="416" href="Data.Bool.Base.html#681" class="Datatype Operator">_≤_</a> <a id="420" class="Symbol">;</a> <a id="422" href="Data.Bool.Base.html#1505" class="Function Operator">if_then_else_</a> <a id="436" class="Symbol">)</a> <a id="438" class="Keyword">renaming</a> <a id="447" class="Symbol">(</a><a id="448" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> <a id="452" class="Symbol">to</a> <a id="455" class="Function Operator">_∧b_</a> <a id="460" class="Symbol">;</a> <a id="462" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a> <a id="466" class="Symbol">to</a> <a id="469" class="Function Operator">_∨b_</a> <a id="474" class="Symbol">;</a> <a id="476" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="478" class="Symbol">to</a> <a id="481" class="Function">True</a><a id="485" class="Symbol">)</a>
<a id="487" class="Keyword">open</a> <a id="492" class="Keyword">import</a> <a id="499" href="Data.Product.html" class="Module">Data.Product</a> <a id="512" class="Keyword">renaming</a> <a id="521" class="Symbol">(</a><a id="522" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a> <a id="526" class="Symbol">to</a> <a id="529" class="InductiveConstructor Operator">_,,_</a> <a id="534" class="Symbol">)</a>
<a id="536" class="Keyword">open</a> <a id="541" class="Keyword">import</a> <a id="548" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="562" class="Keyword">hiding</a> <a id="569" class="Symbol">(</a><a id="570" href="Data.Nat.Base.html#1691" class="Datatype Operator">_≤_</a><a id="573" class="Symbol">)</a>
<a id="575" class="Keyword">import</a> <a id="582" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="620" class="Symbol">as</a> <a id="623" class="Module">Eq</a>
<a id="626" class="Keyword">open</a> <a id="631" href="Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="634" class="Keyword">using</a> <a id="640" class="Symbol">(</a><a id="641" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="644" class="Symbol">;</a> <a id="646" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="650" class="Symbol">;</a> <a id="652" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a><a id="656" class="Symbol">;</a> <a id="658" class="Keyword">module</a> <a id="665" href="Relation.Binary.PropositionalEquality.Properties.html#6744" class="Module">≡-Reasoning</a><a id="676" class="Symbol">;</a> <a id="678" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a><a id="681" class="Symbol">)</a>
<a id="683" class="Keyword">open</a> <a id="688" href="Relation.Binary.PropositionalEquality.Properties.html#6744" class="Module">≡-Reasoning</a>
<a id="700" class="Keyword">open</a> <a id="705" class="Keyword">import</a> <a id="712" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a>


<a id="736" class="Keyword">open</a> <a id="741" class="Keyword">import</a> <a id="748" href="libraries.listLib.html" class="Module">libraries.listLib</a>
<a id="766" class="Keyword">open</a> <a id="771" class="Keyword">import</a> <a id="778" href="libraries.natLib.html" class="Module">libraries.natLib</a>
<a id="795" class="Keyword">open</a> <a id="800" class="Keyword">import</a> <a id="807" href="libraries.boolLib.html" class="Module">libraries.boolLib</a>
<a id="825" class="Keyword">open</a> <a id="830" class="Keyword">import</a> <a id="837" href="libraries.andLib.html" class="Module">libraries.andLib</a>
<a id="854" class="Keyword">open</a> <a id="859" class="Keyword">import</a> <a id="866" href="libraries.maybeLib.html" class="Module">libraries.maybeLib</a>
<a id="885" class="Keyword">open</a> <a id="890" class="Keyword">import</a> <a id="897" href="libraries.emptyLib.html" class="Module">libraries.emptyLib</a>

<a id="917" class="Keyword">open</a> <a id="922" class="Keyword">import</a> <a id="929" href="stack.html" class="Module">stack</a>
<a id="935" class="Keyword">open</a> <a id="940" class="Keyword">import</a> <a id="947" href="stackPredicate.html" class="Module">stackPredicate</a>
<a id="962" class="Keyword">open</a> <a id="967" class="Keyword">import</a> <a id="974" href="instruction.html" class="Module">instruction</a>
<a id="986" class="Keyword">open</a> <a id="991" class="Keyword">import</a> <a id="998" href="stackSemanticsInstructions.html" class="Module">stackSemanticsInstructions</a> <a id="1025" href="hoareTripleStack.html#60" class="Bound">param</a>

<a id="1032" class="Comment">---------------------------------------------------------------------------------</a>
<a id="1114" class="Comment">--   define hoare triples for stack functions</a>
<a id="1160" class="Comment">--   and that their correspondence to the full hoare triples for nonif instructions</a>
<a id="1244" class="Comment">---------------------------------------------------------------------------------------</a>



<a id="1335" class="Keyword">record</a> <a id="&lt;_&gt;gˢ_&lt;_&gt;"></a><a id="1342" href="hoareTripleStack.html#1342" class="Record Operator">&lt;_&gt;gˢ_&lt;_&gt;</a> <a id="1352" class="Symbol">(</a><a id="1353" href="hoareTripleStack.html#1353" class="Bound">φ</a> <a id="1355" class="Symbol">:</a> <a id="1357" href="stackPredicate.html#897" class="Function">StackPredicate</a><a id="1371" class="Symbol">)</a> <a id="1373" class="Symbol">(</a><a id="1374" href="hoareTripleStack.html#1374" class="Bound">stackfun</a> <a id="1383" class="Symbol">:</a> <a id="1385" href="stack.html#1140" class="Function">StackTransformer</a><a id="1401" class="Symbol">)</a>
                       <a id="1426" class="Symbol">(</a><a id="1427" href="hoareTripleStack.html#1427" class="Bound">ψ</a> <a id="1429" class="Symbol">:</a> <a id="1431" href="stackPredicate.html#897" class="Function">StackPredicate</a><a id="1445" class="Symbol">)</a> <a id="1447" class="Symbol">:</a> <a id="1449" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1453" class="Keyword">where</a>
  <a id="1461" class="Keyword">constructor</a> <a id="hoareTripleStackGen"></a><a id="1473" href="hoareTripleStack.html#1473" class="InductiveConstructor">hoareTripleStackGen</a> 
  <a id="1496" class="Keyword">field</a>
    <a id="&lt;_&gt;gˢ_&lt;_&gt;.==&gt;stg"></a><a id="1506" href="hoareTripleStack.html#1506" class="Field">==&gt;stg</a> <a id="1513" class="Symbol">:</a> <a id="1515" class="Symbol">(</a><a id="1516" href="hoareTripleStack.html#1516" class="Bound">time</a> <a id="1521" class="Symbol">:</a> <a id="1523" href="basicBitcoinDataType.html#650" class="Function">Time</a><a id="1527" class="Symbol">)(</a><a id="1529" href="hoareTripleStack.html#1529" class="Bound">msg</a> <a id="1533" class="Symbol">:</a> <a id="1535" href="basicBitcoinDataType.html#842" class="Datatype">Msg</a><a id="1538" class="Symbol">)(</a><a id="1540" href="hoareTripleStack.html#1540" class="Bound">s</a> <a id="1542" class="Symbol">:</a> <a id="1544" href="stack.html#690" class="Function">Stack</a><a id="1549" class="Symbol">)</a>
            <a id="1563" class="Symbol">→</a> <a id="1565" href="hoareTripleStack.html#1353" class="Bound">φ</a> <a id="1567" href="hoareTripleStack.html#1516" class="Bound">time</a> <a id="1572" href="hoareTripleStack.html#1529" class="Bound">msg</a> <a id="1576" href="hoareTripleStack.html#1540" class="Bound">s</a>
            <a id="1590" class="Symbol">→</a> <a id="1592" href="libraries.maybeLib.html#614" class="Function">liftPred2Maybe</a> <a id="1607" class="Symbol">(</a><a id="1608" href="hoareTripleStack.html#1427" class="Bound">ψ</a>  <a id="1611" href="hoareTripleStack.html#1516" class="Bound">time</a> <a id="1616" href="hoareTripleStack.html#1529" class="Bound">msg</a><a id="1619" class="Symbol">)</a> <a id="1621" class="Symbol">(</a><a id="1622" href="hoareTripleStack.html#1374" class="Bound">stackfun</a> <a id="1631" href="hoareTripleStack.html#1516" class="Bound">time</a> <a id="1636" href="hoareTripleStack.html#1529" class="Bound">msg</a> <a id="1640" href="hoareTripleStack.html#1540" class="Bound">s</a><a id="1641" class="Symbol">)</a>
    <a id="&lt;_&gt;gˢ_&lt;_&gt;.&lt;==stg"></a><a id="1647" href="hoareTripleStack.html#1647" class="Field">&lt;==stg</a> <a id="1654" class="Symbol">:</a> <a id="1656" class="Symbol">(</a><a id="1657" href="hoareTripleStack.html#1657" class="Bound">time</a> <a id="1662" class="Symbol">:</a> <a id="1664" href="basicBitcoinDataType.html#650" class="Function">Time</a><a id="1668" class="Symbol">)(</a><a id="1670" href="hoareTripleStack.html#1670" class="Bound">msg</a> <a id="1674" class="Symbol">:</a> <a id="1676" href="basicBitcoinDataType.html#842" class="Datatype">Msg</a><a id="1679" class="Symbol">)(</a><a id="1681" href="hoareTripleStack.html#1681" class="Bound">s</a> <a id="1683" class="Symbol">:</a> <a id="1685" href="stack.html#690" class="Function">Stack</a><a id="1690" class="Symbol">)</a>
            <a id="1704" class="Symbol">→</a> <a id="1706" href="libraries.maybeLib.html#614" class="Function">liftPred2Maybe</a> <a id="1721" class="Symbol">(</a><a id="1722" href="hoareTripleStack.html#1427" class="Bound">ψ</a>  <a id="1725" href="hoareTripleStack.html#1657" class="Bound">time</a> <a id="1730" href="hoareTripleStack.html#1670" class="Bound">msg</a><a id="1733" class="Symbol">)</a> <a id="1735" class="Symbol">(</a><a id="1736" href="hoareTripleStack.html#1374" class="Bound">stackfun</a> <a id="1745" href="hoareTripleStack.html#1657" class="Bound">time</a> <a id="1750" href="hoareTripleStack.html#1670" class="Bound">msg</a> <a id="1754" href="hoareTripleStack.html#1681" class="Bound">s</a><a id="1755" class="Symbol">)</a>
            <a id="1769" class="Symbol">→</a> <a id="1771" href="hoareTripleStack.html#1353" class="Bound">φ</a> <a id="1773" href="hoareTripleStack.html#1657" class="Bound">time</a> <a id="1778" href="hoareTripleStack.html#1670" class="Bound">msg</a> <a id="1782" href="hoareTripleStack.html#1681" class="Bound">s</a>
<a id="1784" class="Keyword">open</a> <a id="1789" href="hoareTripleStack.html#1342" class="Module Operator">&lt;_&gt;gˢ_&lt;_&gt;</a> <a id="1799" class="Keyword">public</a>


</pre></body></html>